(window.webpackJsonp=window.webpackJsonp||[]).push([[395],{103:function(t,e,n){t.exports=n(334)},113:function(t,e,n){t.exports=n(454)},114:function(t,e,n){t.exports=n(457)},1278:function(t,e,n){},1282:function(t,e,n){"use strict";var r=n(1278);n.n(r).a},1283:function(t,e,n){"use strict";var r=n(41),s=n.n(r),o={name:"Assistant",props:{assistant:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{ellipsis:!1}},computed:{assistants:function(){if(!s.a.size(this.assistant))return"- -";var t=[];return s.a.forEach(this.assistant,(function(e,n){e.nickname?t.push(e.nickname):t.push(e)})),s.a.join(t,"、")}},mounted:function(){var t=this.$refs.assistant;this.ellipsis=t.scrollWidth>t.clientWidth}},i=(n(1282),n(47)),a=Object(i.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"assistant",class:[t.ellipsis?"assistant":"","text-overflow"]},[t._v("\n  "+t._s(t.assistants)+"\n\n  "),t.ellipsis?n("a-tooltip",{staticClass:"assistant-all",attrs:{placement:"bottom"}},[n("template",{slot:"title"},[n("span",[t._v(t._s(t.assistants))])]),t._v(" "),n("a-icon",{attrs:{type:"more"}})],2):t._e()],1)}),[],!1,null,"6a102235",null);e.a=a.exports},1295:function(t,e,n){},1315:function(t,e,n){"use strict";var r=n(1295);n.n(r).a},145:function(t,e,n){t.exports=n(452)},334:function(t,e,n){n(335);var r=n(66).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},335:function(t,e,n){var r=n(192),s=n(193).f;n(450)("getOwnPropertyDescriptor",(function(){return function(t,e){return s(r(t),e)}}))},449:function(t,e){e.f=Object.getOwnPropertySymbols},450:function(t,e,n){var r=n(92),s=n(66),o=n(433);t.exports=function(t,e){var n=(s.Object||{})[t]||Object[t],i={};i[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",i)}},452:function(t,e,n){n(453);var r=n(66).Object;t.exports=function(t,e){return r.defineProperties(t,e)}},453:function(t,e,n){var r=n(92);r(r.S+r.F*!n(220),"Object",{defineProperties:n(659)})},454:function(t,e,n){n(455),t.exports=n(66).Object.getOwnPropertyDescriptors},455:function(t,e,n){var r=n(92),s=n(456),o=n(192),i=n(193),a=n(657);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),u=i.f,c=s(r),l={},f=0;c.length>f;)void 0!==(n=u(r,e=c[f++]))&&a(l,e,n);return l}})},456:function(t,e,n){var r=n(644),s=n(449),o=n(143),i=n(140).Reflect;t.exports=i&&i.ownKeys||function(t){var e=r.f(o(t)),n=s.f;return n?e.concat(n(t)):e}},457:function(t,e,n){n(656),t.exports=n(66).Object.getOwnPropertySymbols},56:function(t,e,n){var r=n(188);t.exports=function(t,e,n){return e in t?r(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},644:function(t,e,n){var r=n(739),s=n(714).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,s)}},65:function(t,e,n){t.exports=n(766)},656:function(t,e,n){"use strict";var r=n(140),s=n(434),o=n(220),i=n(92),a=n(740),u=n(768).KEY,c=n(433),l=n(713),f=n(701),p=n(700),d=n(219),h=n(711),m=n(712),v=n(769),y=n(738),g=n(143),b=n(264),_=n(646),k=n(192),S=n(715),w=n(654),x=n(702),O=n(770),j=n(193),I=n(449),P=n(333),T=n(645),C=j.f,E=P.f,N=O.f,R=r.Symbol,$=r.JSON,D=$&&$.stringify,F=d("_hidden"),M=d("toPrimitive"),L={}.propertyIsEnumerable,q=l("symbol-registry"),A=l("symbols"),J=l("op-symbols"),Y=Object.prototype,z="function"==typeof R&&!!I.f,W=r.QObject,K=!W||!W.prototype||!W.prototype.findChild,G=o&&c((function(){return 7!=x(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=C(Y,e);r&&delete Y[e],E(t,e,n),r&&t!==Y&&E(Y,e,r)}:E,H=function(t){var e=A[t]=x(R.prototype);return e._k=t,e},U=z&&"symbol"==typeof R.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof R},Q=function(t,e,n){return t===Y&&Q(J,e,n),g(t),e=S(e,!0),g(n),s(A,e)?(n.enumerable?(s(t,F)&&t[F][e]&&(t[F][e]=!1),n=x(n,{enumerable:w(0,!1)})):(s(t,F)||E(t,F,w(1,{})),t[F][e]=!0),G(t,e,n)):E(t,e,n)},B=function(t,e){g(t);for(var n,r=v(e=k(e)),s=0,o=r.length;o>s;)Q(t,n=r[s++],e[n]);return t},V=function(t){var e=L.call(this,t=S(t,!0));return!(this===Y&&s(A,t)&&!s(J,t))&&(!(e||!s(this,t)||!s(A,t)||s(this,F)&&this[F][t])||e)},X=function(t,e){if(t=k(t),e=S(e,!0),t!==Y||!s(A,e)||s(J,e)){var n=C(t,e);return!n||!s(A,e)||s(t,F)&&t[F][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=N(k(t)),r=[],o=0;n.length>o;)s(A,e=n[o++])||e==F||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===Y,r=N(n?J:k(t)),o=[],i=0;r.length>i;)!s(A,e=r[i++])||n&&!s(Y,e)||o.push(A[e]);return o};z||(a((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===Y&&e.call(J,n),s(this,F)&&s(this[F],t)&&(this[F][t]=!1),G(this,t,w(1,n))};return o&&K&&G(Y,t,{configurable:!0,set:e}),H(t)}).prototype,"toString",(function(){return this._k})),j.f=X,P.f=Q,n(644).f=O.f=Z,n(655).f=V,I.f=tt,o&&!n(653)&&a(Y,"propertyIsEnumerable",V,!0),h.f=function(t){return H(d(t))}),i(i.G+i.W+i.F*!z,{Symbol:R});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var rt=T(d.store),st=0;rt.length>st;)m(rt[st++]);i(i.S+i.F*!z,"Symbol",{for:function(t){return s(q,t+="")?q[t]:q[t]=R(t)},keyFor:function(t){if(!U(t))throw TypeError(t+" is not a symbol!");for(var e in q)if(q[e]===t)return e},useSetter:function(){K=!0},useSimple:function(){K=!1}}),i(i.S+i.F*!z,"Object",{create:function(t,e){return void 0===e?x(t):B(x(t),e)},defineProperty:Q,defineProperties:B,getOwnPropertyDescriptor:X,getOwnPropertyNames:Z,getOwnPropertySymbols:tt});var ot=c((function(){I.f(1)}));i(i.S+i.F*ot,"Object",{getOwnPropertySymbols:function(t){return I.f(_(t))}}),$&&i(i.S+i.F*(!z||c((function(){var t=R();return"[null]"!=D([t])||"{}"!=D({a:t})||"{}"!=D(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],s=1;arguments.length>s;)r.push(arguments[s++]);if(n=e=r[1],(b(e)||void 0!==t)&&!U(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!U(e))return e}),r[1]=e,D.apply($,r)}}),R.prototype[M]||n(451)(R.prototype,M,R.prototype.valueOf),f(R,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},657:function(t,e,n){"use strict";var r=n(333),s=n(654);t.exports=function(t,e,n){e in t?r.f(t,e,s(0,n)):t[e]=n}},711:function(t,e,n){e.f=n(219)},712:function(t,e,n){var r=n(140),s=n(66),o=n(653),i=n(711),a=n(333).f;t.exports=function(t){var e=s.Symbol||(s.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:i.f(t)})}},738:function(t,e,n){var r=n(658);t.exports=Array.isArray||function(t){return"Array"==r(t)}},766:function(t,e,n){n(767),t.exports=n(66).Object.keys},767:function(t,e,n){var r=n(646),s=n(645);n(450)("keys",(function(){return function(t){return s(r(t))}}))},768:function(t,e,n){var r=n(700)("meta"),s=n(264),o=n(434),i=n(333).f,a=0,u=Object.isExtensible||function(){return!0},c=!n(433)((function(){return u(Object.preventExtensions({}))})),l=function(t){i(t,r,{value:{i:"O"+ ++a,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return c&&f.NEED&&u(t)&&!o(t,r)&&l(t),t}}},769:function(t,e,n){var r=n(645),s=n(449),o=n(655);t.exports=function(t){var e=r(t),n=s.f;if(n)for(var i,a=n(t),u=o.f,c=0;a.length>c;)u.call(t,i=a[c++])&&e.push(i);return e}},770:function(t,e,n){var r=n(192),s=n(644).f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return i&&"[object Window]"==o.call(t)?function(t){try{return s(t)}catch(t){return i.slice()}}(t):s(r(t))}},827:function(t,e,n){"use strict";n.r(e);var r=n(188),s=n.n(r),o=n(145),i=n.n(o),a=n(113),u=n.n(a),c=n(103),l=n.n(c),f=n(114),p=n.n(f),d=n(65),h=n.n(d),m=n(56),v=n.n(m),y=n(1277),g=n.n(y),b=n(265),_=n(1302),k={video:"视频",audio:"音频",live:"直播",discuss:"讨论",flash:"Flash",doc:"文档",ppt:"PPT",testpaper:"考试",homework:"作业",exercise:"练习",download:"下载资料",text:"图文"},S={name:"TeachMode",filters:{teachType:function(t){return k[t]}},props:{record:{type:Object,required:!0,default:function(){return{}}}},computed:{replayStatus:function(){var t=this.record.tasks,e=t.type,n=t.activity.ext;return"live"==e&&"videoGenerate"==n.replayStatus},progressStatus:function(){var t=this.record.tasks,e=t.type,n=t.activity.ext;return"live"==e?n.progressStatus:""}}},w=n(47),x=Object(w.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n  "+t._s(t._f("teachType")(t.record.tasks.type))+"\n\n  "),t.progressStatus?[n("a-divider",{attrs:{type:"vertical"}}),t._v(" "),"created"==t.progressStatus?n("a-checkable-tag",{staticStyle:{color:"#fb8d4d"}},[t._v("未开始")]):"start"==t.progressStatus?n("a-checkable-tag",{staticStyle:{color:"#43bc60"}},[t._v("直播中")]):"closed"==t.progressStatus?n("a-checkable-tag",[t._v("已结束")]):t._e()]:t._e(),t._v(" "),t.replayStatus?[n("br"),t._v(" "),n("a-tag",{staticStyle:{"margin-top":"4px"},attrs:{color:"green"}},[t._v("有回放")])]:t._e()],2)}),[],!1,null,null,null).exports,O=n(1283);function j(t,e){var n=h()(t);if(p.a){var r=p()(t);e&&(r=r.filter((function(e){return l()(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){v()(t,e,n[e])})):u.a?i()(t,u()(n)):j(Object(n)).forEach((function(e){s()(t,e,l()(n,e))}))}return t}var P=[{title:"课时名称",dataIndex:"name",width:"15%",scopedSlots:{customRender:"name"}},{title:"教学模式",dataIndex:"mode",filters:[{text:"视频",value:"video"},{text:"音频",value:"audio"},{text:"直播",value:"live"},{text:"讨论",value:"discuss"},{text:"文档",value:"doc"},{text:"PPT",value:"ppt"},{text:"考试",value:"testpaper"},{text:"作业",value:"homework"},{text:"练习",value:"exercise"},{text:"下载资料",value:"download"},{text:"图文",value:"text"}],width:"12%",scopedSlots:{customRender:"mode"}},{title:"开课时间",dataIndex:"startTime",width:"13%",scopedSlots:{customRender:"startTime"}},{title:"时长",width:"10%",dataIndex:"time",scopedSlots:{customRender:"time"}},{title:"授课老师",width:"10%",ellipsis:!0,dataIndex:"teacher",scopedSlots:{customRender:"teacher"}},{title:"助教老师",width:"10%",ellipsis:!0,dataIndex:"assistant",scopedSlots:{customRender:"assistant"}},{title:"问题讨论",width:"10%",dataIndex:"questionNum",scopedSlots:{customRender:"questionNum"}},{title:"学习人数",width:"10%",dataIndex:"studyStudentNum",scopedSlots:{customRender:"studyStudentNum"}},{title:"操作",width:"10%",dataIndex:"actions",scopedSlots:{customRender:"actions"}}],T={components:{ClassName:_.a,TeachMode:x,Assistant:O.a},data:function(){return{data:[],pagination:{},loading:!1,columns:P,locale:{filterConfirm:"确定",filterReset:"重置",emptyText:"暂无数据"},multiClassId:this.$route.params.id,keywords:"",courseId:0,courseSetId:0}},mounted:function(){var t=this;this.fetchLessons(),this.fetchMultiClass(),$("#modal").on("hide.bs.modal",(function(){var e={limit:10,offset:10*(t.pagination.current-1)};t.fetchLessons(e)}))},filters:{timeTransfer:function(t){var e=g.a.floor(t/60),n=t%60,r="".concat(e,"min ");return n&&(r+="".concat(n,"s")),r}},methods:{handleTableChange:function(t,e,n){var r=n.order,s=I({},this.pagination);s.current=t.current,this.pagination=s;var o={limit:t.pageSize,offset:(t.current-1)*t.pageSize};g.a.size(e)&&(o.types=e.mode),r&&(o.sort="ascend"==r?"ASC":"DESC"),this.fetchLessons(o)},fetchMultiClass:function(){var t=this;b.g.get(this.multiClassId).then((function(e){var n=e.course,r=n.id,s=n.courseSetId;t.courseId=r,t.courseSetId=s}))},fetchLessons:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,b.g.getLessons(this.multiClassId,I({limit:10,titleLike:this.keywords},e)).then((function(e){var n=I({},t.pagination);n.total=e.paging.total,t.loading=!1,t.data=e.data,t.pagination=n}))},onSearch:function(t){this.keywords=t,this.pagination.current=1,this.fetchLessons()},handleMenuClick:function(t,e){"copy"!==t?["publish","unpublish"].includes(t)?this.updateTaskStatus(t,e):"delete"===t&&this.deleteTask(e):this.copy(e)},copy:function(t){this.$clipboard(this.copyTaskUrl(t)),this.$message.success("复制成功")},updateTaskStatus:function(t,e){var n=this,r=e.tasks,s=r.courseId,o=r.id,i="publish"==t?"发布成功":"取消发布成功";b.c.updateTaskStatus(s,o,{type:t}).then((function(){n.$message.success(i),g.a.forEach(n.data,(function(e){e.tasks.id==o&&(e.tasks.status="publish"===t?"published":"create")}))}))},deleteTask:function(t){var e=this,n=t.tasks,r=n.courseId,s=n.id;this.$confirm({title:"删除",content:"是否确定删除该课时吗?",okType:"danger",onOk:function(){b.c.deleteTask(r,s).then((function(t){t.success&&(e.$message.success("删除成功"),g.a.forEach(e.data,(function(t,n){t.tasks.id==s&&e.data.splice(n,1)})))}))}})},copyTaskUrl:function(t){return"".concat(window.location.origin,"/course/").concat(t.courseId)},goToEditorLesson:function(){this.$router.push({name:"MultiClassEditorLesson",params:{id:this.courseId},query:{courseSetId:this.courseSetId,multiClassId:this.multiClassId}})}}},C=(n(1315),Object(w.a)(T,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"class-info"},[n("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"16px"}},[n("a-input-search",{staticClass:"pull-left",staticStyle:{width:"260px"},attrs:{placeholder:"请输入课时关键字搜索"},on:{search:t.onSearch}}),t._v(" "),t.isPermission("course_lesson_manage")?n("a-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:t.goToEditorLesson}},[t._v("\n      重排课时/新增课时\n    ")]):t._e()],1),t._v(" "),n("a-table",{attrs:{columns:t.columns,"row-key":function(t){return t.id},"data-source":t.data,loading:t.loading,pagination:t.pagination,locale:t.locale},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"name",fn:function(t,e){return n("class-name",{attrs:{record:e}})}},{key:"mode",fn:function(t,e){return n("teach-mode",{attrs:{record:e}})}},{key:"startTime",fn:function(e,n){return["live"===n.tasks.type?[t._v("\n        "+t._s(t.$dateFormat(n.tasks.startTime,"YYYY-MM-DD HH:mm"))+"\n      ")]:[t._v(" -- ")]]}},{key:"time",fn:function(e,n){return[["video","live"].includes(n.tasks.type)?[t._v("\n        "+t._s(t._f("timeTransfer")(n.tasks.length))+"\n      ")]:[t._v("--")]]}},{key:"teacher",fn:function(e){return[t._v(t._s(e.nickname))]}},{key:"assistant",fn:function(t){return n("assistant",{attrs:{assistant:t}})}},{key:"questionNum",fn:function(e,r){return n("a",{attrs:{href:"/my/course/"+r.tasks.courseId+"/question?type=question",target:"_blank"}},[t._v(t._s(e))])}},{key:"studyStudentNum",fn:function(e,n){return[t._v("\n      "+t._s(e)+"/"+t._s(n.totalStudentNum)+"\n    ")]}},{key:"actions",fn:function(e,r){return[n("a-dropdown",{staticStyle:{"margin-right":"12px"},attrs:{trigger:["hover"],placement:"bottomRight"}},[n("a-button",{attrs:{type:"link"},on:{click:function(t){return t.preventDefault()}}},[n("a-icon",{attrs:{type:"copy"}})],1),t._v(" "),n("a-menu",{attrs:{slot:"overlay"},on:{click:function(e){var n=e.key;return t.handleMenuClick(n,r)}},slot:"overlay"},[n("a-menu-item",{key:"copy"},[t._v("\n            复制课程链接\n          ")])],1)],1),t._v(" "),t.isPermission("course_lesson_edit")?n("a-button",{attrs:{type:"link","data-toggle":"modal","data-target":"#modal","data-url":"/course/"+r.courseId+"/task/"+r.tasks.id+"/update"}},[t._v("编辑")]):t._e(),t._v(" "),t.isPermission("course_lesson_manage")?n("a-dropdown",{attrs:{trigger:["hover"],placement:"bottomRight"}},[n("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return t.preventDefault()}}},[n("a-icon",{attrs:{type:"caret-down"}})],1),t._v(" "),n("a-menu",{attrs:{slot:"overlay"},on:{click:function(e){var n=e.key;return t.handleMenuClick(n,r)}},slot:"overlay"},["published"==r.tasks.status&&t.isPermission("course_lesson_manage")?n("a-menu-item",{key:"unpublish"},[t._v("\n            取消发布\n          ")]):[t.isPermission("course_lesson_manage")?n("a-menu-item",{key:"publish"},[t._v("\n              立即发布\n            ")]):t._e(),t._v(" "),t.isPermission("course_lesson_manage")?n("a-menu-item",{key:"delete"},[t._v("\n              删除\n            ")]):t._e()]],2)],1):t._e()]}}])})],1)}),[],!1,null,null,null));e.default=C.exports}}]);