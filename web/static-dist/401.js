(window.webpackJsonp=window.webpackJsonp||[]).push([[401],{1297:function(t,e,s){},1317:function(t,e,s){"use strict";var n=s(1297);s.n(n).a},836:function(t,e,s){"use strict";s.r(e);var n=s(14),a=s.n(n),i=s(26),r=s.n(i),o=s(265),u=s(1302),c=s(1277),d=s.n(c),l=[{title:"课时",dataIndex:"lesson",scopedSlots:{customRender:"lesson"}},{title:"作业/考试",dataIndex:"name",scopedSlots:{customRender:"name"},filters:[{text:"作业",value:"homework"},{text:"考试",value:"testpaper"}]},{title:"题量",dataIndex:"item_count",scopedSlots:{customRender:"item_count"}},{title:"已批",dataIndex:"finished",scopedSlots:{customRender:"finished"}},{title:"未批",dataIndex:"reviewing",scopedSlots:{customRender:"reviewing"}},{title:"未交",dataIndex:"doing",scopedSlots:{customRender:"doing"}},{title:"开始时间",dataIndex:"startTime",scopedSlots:{customRender:"startTime"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],m=[{title:"姓名",dataIndex:"nickname",scopedSlots:{customRender:"nickname"}},{title:"成绩",dataIndex:"grade",scopedSlots:{customRender:"grade"}},{title:"提交时间",dataIndex:"end_time",scopedSlots:{customRender:"end_time"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"批阅人",dataIndex:"teacherInfo",scopedSlots:{customRender:"teacherInfo"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],f={name:"HomeWorkReview",components:{ClassName:u.a},data:function(){return{columns:l,resultColumns:m,getListLoading:!1,homeworksList:[],examResultList:{},paging:{total:0,offset:0,pageSize:10},modalVisible:!1,currentTab:0,currentTask:{},status:["all","reviewing","doing","finished"],statusMap:{doing:"进行中",paused:"暂停",reviewing:"未批阅",finished:"已批阅"},gradeMap:{excellent:"优秀",good:"良好",passed:"合格",unpassed:"不合格"}}},watch:{currentTab:function(t){this.getExamResults(t)}},computed:{examResults:function(){var t=this.status[this.currentTab];return this.examResultList[t]}},created:function(){this.getHomeworkList()},methods:{getHomeworkList:function(){var t=arguments,e=this;return r()(a.a.mark((function s(){var n,i,r,u;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},e.getListLoading=!0,s.prev=2,s.next=5,o.h.getExams({multiClassId:e.$route.params.id,types:n.types||[],offset:n.offset||0,limit:n.pageSize||10});case 5:i=s.sent,r=i.data,u=i.paging,e.homeworksList=r,e.paging=d.a.assign(u,{pageSize:Number(u.limit)});case 10:return s.prev=10,e.getListLoading=!1,s.finish(10);case 13:case"end":return s.stop()}}),s,null,[[2,,10,13]])})))()},showResultListModal:function(t,e){this.currentTask=e,this.currentTab=this.status.indexOf(t),this.modalVisible=!0},getExamResults:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=this.status[e];o.h.getExamResults({status:s,multiClassId:this.$route.params.id,taskId:this.currentTask.id}).then((function(e){e.paging.pageSize=e.paging.limit,t.$set(t.examResultList,s,e)}))},change:function(t,e,s,n){n.currentDataSource;var a={};e&&d.a.isArray(e.name)&&(a.types=e.name),t&&(a.offset=t.pageSize*(t.current-1),a.pageSize=t.pageSize),a&&this.getHomeworkList(a)}}},g=(s(1317),s(47)),p=Object(g.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-spin",{attrs:{spinning:t.getListLoading}},[s("a-table",{attrs:{columns:t.columns,"data-source":t.homeworksList,pagination:t.paging,rowKey:function(t){return t.id}},on:{change:t.change},scopedSlots:t._u([{key:"lesson",fn:function(t,e){return s("class-name",{attrs:{record:e}})}},{key:"name",fn:function(e,s){return[t._v(t._s(s.tasks.assessment.name))]}},{key:"item_count",fn:function(e,s){return[t._v(t._s(s.tasks.assessment.item_count))]}},{key:"finished",fn:function(e,n){return s("a",{on:{click:function(e){return t.showResultListModal("finished",n.tasks)}}},[t._v("\n        "+t._s(n.tasks.assessmentStatusNum.finished||0)+"\n      ")])}},{key:"reviewing",fn:function(e,n){return s("a",{on:{click:function(e){return t.showResultListModal("reviewing",n.tasks)}}},[t._v("\n        "+t._s(n.tasks.assessmentStatusNum.reviewing||0)+"\n      ")])}},{key:"doing",fn:function(e,n){return s("a",{on:{click:function(e){return t.showResultListModal("doing",n.tasks)}}},[t._v("\n        "+t._s(n.tasks.assessmentStatusNum.doing||0)+"\n      ")])}},{key:"startTime",fn:function(e,s){return[t._v("\n        "+t._s(t.$dateFormat(s.tasks.createdTime,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(e,n){return[s("a-space",{attrs:{size:"large"}},[s("a-button",{attrs:{type:"link"}},[s("a",{staticClass:"ant-button-link",attrs:{href:"/course/"+n.tasks.courseId+"/manage/exam/activity/"+n.tasks.activityId+"/analysis",target:"_blank"}},[t._v("\n              答题分布\n            ")])]),t._v(" "),s("a-button",{attrs:{type:"link","data-target":"#modal","data-toggle":"modal","data-url":"/course/"+n.tasks.courseId+"/activity/"+n.tasks.activityId+"/testpaper/graph"}},[t._v("\n            成绩分布\n          ")])],1)]}}])})],1),t._v(" "),s("a-modal",{attrs:{visible:t.modalVisible,footer:null,title:t.currentTask.assessment?t.currentTask.assessment.name:"",width:920},on:{cancel:function(e){t.modalVisible=!1}}},[s("a-tabs",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[s("a-tab-pane",{key:0,attrs:{tab:"全部"}}),t._v(" "),s("a-tab-pane",{key:1,attrs:{tab:"未批阅"}}),t._v(" "),s("a-tab-pane",{key:2,attrs:{tab:"进行中"}}),t._v(" "),s("a-tab-pane",{key:3,attrs:{tab:"已批阅"}})],1),t._v(" "),t.examResults?s("a-table",{attrs:{columns:t.resultColumns,"data-source":t.examResults.data,pagination:t.examResults.paging},scopedSlots:t._u([{key:"nickname",fn:function(e,s){return[t._v(t._s(s.userInfo.nickname))]}},{key:"grade",fn:function(e,s){return[t._v(t._s("reviewing"===s.status?"--":t.gradeMap[s.answerReportInfo.grade]))]}},{key:"teacherInfo",fn:function(e,s){return[t._v(t._s(s.teacherInfo.nickname||"--"))]}},{key:"status",fn:function(e){return[t._v("\n        "+t._s(t.statusMap[e])+"\n      ")]}},{key:"end_time",fn:function(e){return[t._v("\n        "+t._s(t.$dateFormat(e,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(e,n){return["reviewing"===n.status?s("a",{attrs:{href:"/course/"+t.currentTask.courseId+"/manage/testpaper/"+n.id+"/check?action=check",target:"_blank"}},[t._v("去批阅")]):"finished"===n.status?s("a",{attrs:{href:"/homework/result/"+n.id+"/show?action=check",target:"_blank"}},[t._v("查看结果")]):t._e()]}}],null,!1,2664890532)}):t._e()],1)],1)}),[],!1,null,null,null);e.default=p.exports}}]);