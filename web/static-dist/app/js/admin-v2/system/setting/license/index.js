!function(d){function e(e){for(var t,n,r=e[0],i=e[1],a=e[2],s=0,o=[];s<r.length;s++)n=r[s],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&o.push(l[n][0]),l[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(d[t]=i[t]);for(p&&p(e);o.length;)o.shift()();return u.push.apply(u,a||[]),c()}function c(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,i=1;i<n.length;i++){var a=n[i];0!==l[a]&&(r=!1)}r&&(u.splice(t--,1),e=s(s.s=n[0]))}return e}var n={},l={88:0},u=[];function s(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return d[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=d,s.c=n,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static-dist/";var t=window.webpackJsonp=window.webpackJsonp||[],r=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var p=r;u.push([580,0]),c()}({580:function(e,t,n){"use strict";n.r(t);var r=n(21),i=n.n(r);cd.upload({el:"#license_picture"}).on("success",function(e,t,n){var r=$(e.currentTarget),i=$(r.data("target")),a=new FormData;a.append("token",r.data("token")),a.append("file",t),o(a).then(function(e){i.attr("src",e.url),$('input[name="license_picture"]').val(e.url)})}).on("error",function(e){$el.val(""),"FILE_SIZE_LIMIT"===e?cd.message({type:"danger",message:Translator.trans("uploader.size_2m_limit_hint")}):5006201===e&&cd.message({type:"danger",message:Translator.trans("uploader.type_denied_limit_hint")})}),function(){$("#license-form"),$(".setting_permit").length;$(".setting_permit").last().find(".addSettingPermitBtn").show()}(),function(){for(var e=$(".setting_permit").length-1,t=0;t<=e;t++)d(t)}();var a=$("#license-form").validate({rules:{license_url:{url:!0}},ajax:!0,submitSuccess:function(e){console.log(e),cd.message({type:"success",message:Translator.trans("site.save_success_hint")}),$("#save_license").button("reset")}});function o(n){return new i.a(function(t,e){$.ajax({url:app.uploadUrl,type:"POST",cache:!1,data:n,processData:!1,contentType:!1}).done(function(e){t(e)})})}function s(e,t){$(e[t]).on("click",function(){$(this).hide(),$(".setting_permit").length<10?function(e){var t=$("#permit_area"),n=$(".setting_permit").prop("outerHTML"),r="permits["+e+"][name]",i="permits["+e+"][record_number]",a="permits["+e+"][picture]";t.append(n);var s=$(".setting_permit").last();s.find(".permit_picture_remove").hide(),s.find(".removeSettingPermitBtn").show(),s.find(".addSettingPermitBtn").show(),s.find(".permit_name").attr("name",r),s.find(".permit_record_number").attr("name",i),s.find(".permit_picture").attr("name",a),s.attr("id",function(){return"settingPermit_"+e}),c(".permit_picture",e),c(".cd-image-upload",e),c(".removeSettingPermitBtn",e),c(".addSettingPermitBtn",e),s.find(".permit_name").attr("value",""),s.find(".permit_record_number").attr("value",""),s.find(".permit_picture").attr("value",""),s.find("img").attr("src","/assets/img/default/gif.png"),s.find(".cd-hide").attr("id","permits"+e),s.find(".cd-hide").attr("data-target","#permits-qrcode"+e),s.find(".cd-avatar-square").attr("id","permits-qrcode"+e),s.find(".image-delete-tip").attr("id","js-image-delete-"+e),d($(".setting_permit").last().attr("id").replace(/[^0-9]/gi,""))}(++t):cd.message({type:"danger",message:Translator.trans("admin.setting.delete_permit_setting_max_number")})})}function d(e){var n,t,r=[],i=[],a=[];0===e&&$("#removeSettingPermitBtn_0").hide(),function(e){var s=0<arguments.length&&void 0!==e?e:0;cd.upload({el:"#permits"+s}).on("success",function(e,t,n){var r=$(e.currentTarget),i=$(r.data("target")),a=new FormData;a.append("token",r.data("token")),a.append("file",t),o(a).then(function(e){i.attr("src",e.url),$('input[name="permits['+s+'][picture]"]').val(e.url),$("#js-image-delete-"+s).removeClass("hidden")})}).on("error",function(e){$el.val(""),"FILE_SIZE_LIMIT"===e?cd.message({type:"danger",message:Translator.trans("uploader.size_2m_limit_hint")}):5006201===e&&cd.message({type:"danger",message:Translator.trans("uploader.type_denied_limit_hint")})})}(e),r[e]="#js-image-delete-"+e,i[e]="#removeSettingPermitBtn_"+e,a[e]="#addSettingPermitBtn_"+e,n=e,$(r[n]).on("click",function(){var e=$(this),t=e.closest(".cd-image-upload").find(".js-uploaded-image");if(!confirm(Translator.trans("admin.site.delete_hint")))return!1;$('input[name="permits['+n+'][picture]"]').val(""),t.attr("src","/assets/img/default/gif.png"),e.addClass("hidden"),cd.message({type:"success",message:Translator.trans("admin.setting.delete_permit_picture_success_hint")})}).error(function(){cd.message({type:"danger",message:Translator.trans("admin.setting.delete_permit_picture_fail_hint")})}),t=e,$(i[t]).on("click",function(){var e="#settingPermit_"+t;confirm(Translator.trans("admin.setting.delete_permit_setting_delete_confirom"))&&($(e).remove(),$(".setting_permit").last().find(".addSettingPermitBtn").show())}),s(a,e)}function c(e,t){$(".setting_permit").last().find(e).attr("id",function(){return e=(e+"_"+t).replace(/\./,"")})}$("#save_license").on("click",function(e){var t=$(e.currentTarget);a.form()&&(t.button("loading"),$("#license-form").submit())}),cd.upload({el:"#license-picture"}).on("success",function(e,t,n){var r=$(e.currentTarget),i=$(r.data("target")),a=new FormData;a.append("token",r.data("token")),a.append("file",t),o(a).then(function(e){i.attr("src",e.url),$('input[name="license_picture"]').val(e.url),$(".js-image-delete").removeClass("hidden")})}).on("error",function(e){$el.val(""),"FILE_SIZE_LIMIT"===e?cd.message({type:"danger",message:Translator.trans("uploader.size_2m_limit_hint")}):5006201===e&&cd.message({type:"danger",message:Translator.trans("uploader.type_denied_limit_hint")})}),$(".js-image-delete").on("click",function(){if(!confirm(Translator.trans("admin.site.delete_hint")))return!1;var e=$(this);e.closest(".cd-image-upload").find(".js-uploaded-image").attr("src","/assets/img/default/gif.png"),$('[name="license_picture"]').val(""),e.addClass("hidden")})}});