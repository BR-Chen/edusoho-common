!function(u){function e(e){for(var t,n,r=e[0],i=e[1],a=e[2],o=0,c=[];o<r.length;o++)n=r[o],Object.prototype.hasOwnProperty.call(l,n)&&l[n]&&c.push(l[n][0]),l[n]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(u[t]=i[t]);for(p&&p(e);c.length;)c.shift()();return v.push.apply(v,a||[]),s()}function s(){for(var e,t=0;t<v.length;t++){for(var n=v[t],r=!0,i=1;i<n.length;i++){var a=n[i];0!==l[a]&&(r=!1)}r&&(v.splice(t--,1),e=o(o.s=n[0]))}return e}var n={},l={46:0},v=[];function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return u[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=u,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static-dist/";var t=window.webpackJsonp=window.webpackJsonp||[],r=t.push.bind(t);t.push=e,t=t.slice();for(var i=0;i<t.length;i++)e(t[i]);var p=r;v.push([725,0]),s()}({53:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(20),o=n.n(r),i=n(0),a=n.n(i),c=n(1),u=n.n(c),s=n(14),l=n.n(s),v=(n(130),n(131),function(){function e(){a()(this,e),this.eventMap={receives:{}},this._registerIframeEvents()}return u()(e,[{key:"_registerIframeEvents",value:function(){return l.a.instanceId("activity"),l.a.fedx.addFilter([{channel:"activity-events",topic:"#",direction:"out"},{channel:"task-events",topic:"#",direction:"in"}]),l.a.fedx.signalReady(),this._registerReceiveTaskParentEvents(),this}},{key:"_registerReceiveTaskParentEvents",value:function(){var i=this;l.a.subscribe({channel:"task-events",topic:"#",callback:function(e){var t=e.event,n=e.data,r=i.eventMap.receives[t];void 0!==r&&r.forEach(function(e){return e(n)})}})}},{key:"emit",value:function(i,a){return new o.a(function(t,n){var e={event:i,data:a};l.a.publish({channel:"activity-events",topic:"#",data:e});var r=l.a.channel("task-events").subscribe("#",function(e){e.error?n(e.error):t(e),r.unsubscribe()})})}},{key:"receive",value:function(e,t){this.eventMap.receives[e]=this.eventMap.receives[e]||[],this.eventMap.receives[e].push(t)}}]),e}())},725:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(1),o=n.n(a),c=(n(67),function(){function t(e){i()(this,t),this.container=e,this.interval=$(this.container).data("watchTimeSec"),this.playerCounter=0,this.activityId=$(this.container).data("id")}return o()(t,[{key:"addVideoPlayerCounter",value:function(e,t){var n=store.get("activity_id_"+this.activityId+"_playing_counter");if(n||(this.playerCounter=0),!t||!t.playing)return!1;n>=this.interval?this.watching(e):t.playing&&this.playerCounter++,store.set("activity_id_"+this.activityId+"_playing_counter",this.playerCounter)}},{key:"watching",value:function(e){var t=store.get("activity_id_"+this.activityId+"_playing_counter");console.log(t),e.emit("watching",{watchTime:t}).then(function(){var e=$("#video-content").data("watchUrl");$.post(e,function(e){e&&"error"==e.status&&window.location.reload()})}).catch(function(e){console.error(e)}),this.playerCounter=0}}]),t}()),u=n(42),s=n.n(u),l=n(49),v=n(53);new(function(){function t(e){i()(this,t),this.player={},this.intervalId=null,this.recorder=e,this.emitter=new v.a}return o()(t,[{key:"play",value:function(){$("#swf-player").length?this._playerSwf():this._playVideo(),this.record()}},{key:"record",value:function(){var e=this;this.intervalId=setInterval(function(){e.recorder.addVideoPlayerCounter(e.emitter,e.player)},1e3)}},{key:"getPlay",value:function(){return this.player}},{key:"_playerSwf",value:function(){var e="swf-player";s.a.embedSWF($("#"+e).data("url"),e,"100%","100%","9.0.0",null,null,{wmode:"opaque",allowFullScreen:"true"})}},{key:"_playVideo",value:function(){var t=this,e=new l.a({name:"partner",project:"PlayerProject",children:[],type:"parent"});e.on("ended",function(e){t.player.playing=!1,t._onFinishLearnTask(e)}),e.on("playing",function(e){t.player.playing=!0}),e.on("paused",function(e){t.player.playing=!1,t.recorder.watching(t.emitter)}),e.on("timechange",function(e){t.player.currentTime=e.currentTime})}},{key:"_onFinishLearnTask",value:function(e){var t=this;this.emitter.emit("finish",{data:e}).then(function(){clearInterval(t.intervalId)}).catch(function(e){console.error(e)})}}]),t}())(new c("#video-content")).play()}});