(window.webpackJsonp=window.webpackJsonp||[]).push([[391],{107:function(t,e,n){t.exports=n(358)},1388:function(t,e,n){t.exports=function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var s=n(t),r=n(e);function a(...t){class e{constructor(){for(let e of t)i(this,new e)}}for(let n of t)i(e,n),i(e.prototype,n.prototype);return e}function i(t,e){for(let n of Reflect.ownKeys(e))if("constructor"!==n&&"prototype"!==n&&"name"!==n){let s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,s)}}class o extends(a(s.default,r.default)){}return o}(n(68),n(1391))},1391:function(t,e,n){t.exports=function(){"use strict";var t="millisecond",e="second",n="minute",s="hour",r="day",a="week",i="month",o="quarter",u="year",c="date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},h=function(t,e,n){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(n)+t},m={s:h,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),s=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+h(s,2,"0")+":"+h(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var s=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(s,i),a=n-r<0,o=e.clone().add(s+(a?-1:1),i);return+(-(s+(n-r)/(a?r-o:o-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(f){return{M:i,y:u,w:a,d:r,D:c,h:s,m:n,s:e,ms:t,Q:o}[f]||String(f||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p="en",g={};g[p]=d;var v=function(t){return t instanceof b},y=function(t,e,n){var s;if(!t)return p;if("string"==typeof t)g[t]&&(s=t),e&&(g[t]=e,s=t);else{var r=t.name;g[r]=t,s=r}return!n&&s&&(p=s),s||!n&&p},$=function(t,e){if(v(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new b(n)},k=m;k.l=y,k.i=v,k.w=function(t,e){return $(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var b=function(){function d(t){this.$L=y(t.locale,null,!0),this.parse(t)}var h=d.prototype;return h.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(k.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(f);if(s){var r=s[2]-1||0,a=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},h.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},h.$utils=function(){return k},h.isValid=function(){return!("Invalid Date"===this.$d.toString())},h.isSame=function(t,e){var n=$(t);return this.startOf(e)<=n&&n<=this.endOf(e)},h.isAfter=function(t,e){return $(t)<this.startOf(e)},h.isBefore=function(t,e){return this.endOf(e)<$(t)},h.$g=function(t,e,n){return k.u(t)?this[e]:this.set(n,t)},h.unix=function(){return Math.floor(this.valueOf()/1e3)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(t,o){var f=this,l=!!k.u(o)||o,d=k.p(t),h=function(t,e){var n=k.w(f.$u?Date.UTC(f.$y,e,t):new Date(f.$y,e,t),f);return l?n:n.endOf(r)},m=function(t,e){return k.w(f.toDate()[t].apply(f.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),f)},p=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case u:return l?h(1,0):h(31,11);case i:return l?h(1,g):h(0,g+1);case a:var $=this.$locale().weekStart||0,b=(p<$?p+7:p)-$;return h(l?v-b:v+(6-b),g);case r:case c:return m(y+"Hours",0);case s:return m(y+"Minutes",1);case n:return m(y+"Seconds",2);case e:return m(y+"Milliseconds",3);default:return this.clone()}},h.endOf=function(t){return this.startOf(t,!1)},h.$set=function(a,o){var f,l=k.p(a),d="set"+(this.$u?"UTC":""),h=(f={},f[r]=d+"Date",f[c]=d+"Date",f[i]=d+"Month",f[u]=d+"FullYear",f[s]=d+"Hours",f[n]=d+"Minutes",f[e]=d+"Seconds",f[t]=d+"Milliseconds",f)[l],m=l===r?this.$D+(o-this.$W):o;if(l===i||l===u){var p=this.clone().set(c,1);p.$d[h](m),p.init(),this.$d=p.set(c,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},h.set=function(t,e){return this.clone().$set(t,e)},h.get=function(t){return this[k.p(t)]()},h.add=function(t,o){var c,f=this;t=Number(t);var l=k.p(o),d=function(e){var n=$(f);return k.w(n.date(n.date()+Math.round(e*t)),f)};if(l===i)return this.set(i,this.$M+t);if(l===u)return this.set(u,this.$y+t);if(l===r)return d(1);if(l===a)return d(7);var h=(c={},c[n]=6e4,c[s]=36e5,c[e]=1e3,c)[l]||1,m=this.$d.getTime()+t*h;return k.w(m,this)},h.subtract=function(t,e){return this.add(-1*t,e)},h.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",s=k.z(this),r=this.$locale(),a=this.$H,i=this.$m,o=this.$M,u=r.weekdays,c=r.months,f=function(t,s,r,a){return t&&(t[s]||t(e,n))||r[s].substr(0,a)},d=function(t){return k.s(a%12||12,t,"0")},h=r.meridiem||function(t,e,n){var s=t<12?"AM":"PM";return n?s.toLowerCase():s},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:k.s(o+1,2,"0"),MMM:f(r.monthsShort,o,c,3),MMMM:f(c,o),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:f(r.weekdaysMin,this.$W,u,2),ddd:f(r.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(a),HH:k.s(a,2,"0"),h:d(1),hh:d(2),a:h(a,i,!0),A:h(a,i,!1),m:String(i),mm:k.s(i,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:s};return n.replace(l,(function(t,e){return e||m[t]||s.replace(":","")}))},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(t,c,f){var l,d=k.p(c),h=$(t),m=6e4*(h.utcOffset()-this.utcOffset()),p=this-h,g=k.m(this,h);return g=(l={},l[u]=g/12,l[i]=g,l[o]=g/3,l[a]=(p-m)/6048e5,l[r]=(p-m)/864e5,l[s]=p/36e5,l[n]=p/6e4,l[e]=p/1e3,l)[d]||p,f?g:k.a(g)},h.daysInMonth=function(){return this.endOf(i).$D},h.$locale=function(){return g[this.$L]},h.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),s=y(t,e,!0);return s&&(n.$L=s),n},h.clone=function(){return k.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},d}(),_=b.prototype;return $.prototype=_,[["$ms",t],["$s",e],["$m",n],["$H",s],["$W",r],["$M",i],["$y",u],["$D",c]].forEach((function(t){_[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),$.extend=function(t,e){return t.$i||(t(e,b,$),t.$i=!0),$},$.locale=y,$.isDayjs=v,$.unix=function(t){return $(1e3*t)},$.en=g[p],$.Ls=g,$.p={},$}()},14:function(t,e,n){t.exports=n(554)},1408:function(t,e,n){},1412:function(t,e,n){"use strict";var s={name:"ClassName",props:{record:{type:Object,required:!0,default:function(){return{}}}},computed:{className:function(){var t=this.record,e=t.chapterTitle,n=t.unitTitle,s=t.number,r=t.title,a=t.tasks,i="";if("lesson"===a.mode)i="".concat(s,". ").concat(r);else{var o=a.number.split("-");i="".concat(s,".").concat(o[1]-1," [任务]").concat(a.title)}return n&&(i="".concat(n," ").concat(i)),e&&(i=n?"".concat(e," - ").concat(i):"".concat(e," ").concat(i)),i}}},r=n(30),a=Object(r.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-overflow"},[n("span",{attrs:{title:t.className}},[t._v(t._s(t.className))]),t._v(" "),n("br"),t._v(" "),"published"!=t.record.tasks.status?n("a-tag",{staticStyle:{"margin-top":"4px"}},[t._v("未发布")]):t._e()],1)}),[],!1,null,null,null);e.a=a.exports},1427:function(t,e,n){"use strict";var s=n(1408);n.n(s).a},224:function(t,e,n){n(225);var s=n(51).Object;t.exports=function(t,e){return s.getOwnPropertyDescriptor(t,e)}},225:function(t,e,n){var s=n(137),r=n(185).f;n(357)("getOwnPropertyDescriptor",(function(){return function(t,e){return r(s(t),e)}}))},357:function(t,e,n){var s=n(76),r=n(51),a=n(326);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],i={};i[t]=e(n),s(s.S+s.F*a((function(){n(1)})),"Object",i)}},358:function(t,e,n){n(359);var s=n(51).Object;t.exports=function(t,e){return s.defineProperties(t,e)}},359:function(t,e,n){var s=n(76);s(s.S+s.F*!n(143),"Object",{defineProperties:n(408)})},360:function(t,e,n){n(361),t.exports=n(51).Object.getOwnPropertyDescriptors},361:function(t,e,n){var s=n(76),r=n(362),a=n(137),i=n(185),o=n(410);s(s.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,s=a(t),u=i.f,c=r(s),f={},l=0;c.length>l;)void 0!==(n=u(s,e=c[l++]))&&o(f,e,n);return f}})},362:function(t,e,n){var s=n(380),r=n(364),a=n(135),i=n(100).Reflect;t.exports=i&&i.ownKeys||function(t){var e=s.f(a(t)),n=r.f;return n?e.concat(n(t)):e}},363:function(t,e,n){n(409),t.exports=n(51).Object.getOwnPropertySymbols},39:function(t,e,n){var s=n(130);t.exports=function(t,e,n){return e in t?s(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},47:function(t,e,n){t.exports=n(667)},667:function(t,e,n){n(668),t.exports=n(51).Object.keys},668:function(t,e,n){var s=n(378),r=n(379);n(357)("keys",(function(){return function(t){return r(s(t))}}))},74:function(t,e,n){t.exports=n(224)},81:function(t,e,n){t.exports=n(360)},82:function(t,e,n){t.exports=n(363)},935:function(t,e,n){"use strict";n.r(e);var s=n(130),r=n.n(s),a=n(107),i=n.n(a),o=n(81),u=n.n(o),c=n(74),f=n.n(c),l=n(82),d=n.n(l),h=n(47),m=n.n(h),p=n(14),g=n.n(p),v=n(29),y=n.n(v),$=n(43),k=n.n($),b=n(39),_=n.n(b),w=n(553),x=n(1412),S=n(1388),M=n.n(S);function D(t,e){var n=m()(t);if(d.a){var s=d()(t);e&&(s=s.filter((function(e){return f()(t,e).enumerable}))),n.push.apply(n,s)}return n}var O=[{title:"课时",dataIndex:"lesson",scopedSlots:{customRender:"lesson"}},{title:"作业/考试",dataIndex:"name",scopedSlots:{customRender:"name"},filters:[{text:"作业",value:"homework"},{text:"考试",value:"testpaper"}]},{title:"题量",dataIndex:"item_count",scopedSlots:{customRender:"item_count"}},{title:"已批",dataIndex:"finished",scopedSlots:{customRender:"finished"}},{title:"未批",dataIndex:"reviewing",scopedSlots:{customRender:"reviewing"}},{title:"未交",dataIndex:"doing",scopedSlots:{customRender:"doing"}},{title:"开始时间",dataIndex:"startTime",scopedSlots:{customRender:"startTime"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],T=[{title:"姓名",dataIndex:"nickname",scopedSlots:{customRender:"nickname"}},{title:"成绩",dataIndex:"grade",scopedSlots:{customRender:"grade"}},{title:"提交时间",dataIndex:"end_time",scopedSlots:{customRender:"end_time"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"批阅人",dataIndex:"teacherInfo",scopedSlots:{customRender:"teacherInfo"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],I={all:{total:0,offset:0,pageSize:5},reviewing:{total:0,offset:0,pageSize:5},doing:{total:0,offset:0,pageSize:5},finished:{total:0,offset:0,pageSize:5}},R={name:"HomeWorkReview",components:{ClassName:x.a},data:function(){return{columns:O,resultColumns:T,getListLoading:!1,homeworksList:[],examResultList:{},paging:{total:0,offset:0,pageSize:10},examPaging:I,modalVisible:!1,currentTab:0,currentTask:{},status:["all","reviewing","doing","finished"],statusMap:{doing:"进行中",paused:"暂停",reviewing:"未批阅",finished:"已批阅"},gradeMap:{excellent:"优秀",good:"良好",passed:"合格",unpassed:"不合格"}}},watch:{currentTab:function(t){this.getExamResults(t)}},computed:{examResults:function(){var t=this.status[this.currentTab];return this.examResultList[t]}},created:function(){this.getHomeworkList()},methods:{handleExamTableChange:function(t){var e=this.status[this.currentTab],n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){_()(t,e,n[e])})):u.a?i()(t,u()(n)):D(Object(n)).forEach((function(e){r()(t,e,f()(n,e))}))}return t}({},this.examPaging[e]);n.current=t.current,n.offset=(t.current-1)*t.pageSize,this.examPaging[e]=n;var s={limit:t.pageSize,offset:(t.current-1)*t.pageSize};this.getExamResults(this.currentTab,s)},getHomeworkList:function(){var t=arguments,e=this;return k()(y.a.mark((function n(){var s,r,a,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:{},e.getListLoading=!0,n.prev=2,n.next=5,w.j.getExams({multiClassId:e.$route.params.id,types:s.types||[],offset:s.offset||0,limit:s.pageSize||10});case 5:r=n.sent,a=r.data,i=r.paging,e.homeworksList=a,e.paging=M.a.assign(i,{pageSize:Number(i.limit)});case 10:return n.prev=10,e.getListLoading=!1,n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[2,,10,13]])})))()},showResultListModal:function(t,e){var n=this.status.indexOf(t);this.currentTask=e,this.currentTab=n,this.currentTab==n&&this.getExamResults(n),this.modalVisible=!0},getExamResults:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=this.status[e];console.log(s),console.log(this.examPaging[s]),w.j.getExamResults({status:s,multiClassId:this.$route.params.id,taskId:this.currentTask.id,offset:n.offset||this.examPaging[s].offset||I[s].offset,limit:n.limit||this.examPaging[s].pageSize||I[s].pageSize}).then((function(e){e.paging.page=e.paging.offset/e.paging.limit+1,t.examPaging[s]=g()(t.examPaging[s],e.paging),t.$set(t.examResultList,s,e)}))},change:function(t,e,n,s){s.currentDataSource;var r={};e&&M.a.isArray(e.name)&&(r.types=e.name),t&&(r.offset=t.pageSize*(t.current-1),r.pageSize=t.pageSize),r&&this.getHomeworkList(r)}}},L=(n(1427),n(30)),j=Object(L.a)(R,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-spin",{attrs:{spinning:t.getListLoading}},[n("a-table",{attrs:{columns:t.columns,"data-source":t.homeworksList,pagination:t.paging,rowKey:function(t){return t.id}},on:{change:t.change},scopedSlots:t._u([{key:"lesson",fn:function(t,e){return n("class-name",{attrs:{record:e}})}},{key:"name",fn:function(e,n){return[t._v(t._s(n.tasks.assessment.name))]}},{key:"item_count",fn:function(e,n){return[t._v(t._s(n.tasks.assessment.item_count))]}},{key:"finished",fn:function(e,s){return n("a",{on:{click:function(e){return t.showResultListModal("finished",s.tasks)}}},[t._v("\n        "+t._s(s.tasks.assessmentStatusNum.finished||0)+"\n      ")])}},{key:"reviewing",fn:function(e,s){return n("a",{on:{click:function(e){return t.showResultListModal("reviewing",s.tasks)}}},[t._v("\n        "+t._s(s.tasks.assessmentStatusNum.reviewing||0)+"\n      ")])}},{key:"doing",fn:function(e,s){return n("a",{on:{click:function(e){return t.showResultListModal("doing",s.tasks)}}},[t._v("\n        "+t._s(s.tasks.assessmentStatusNum.doing||0)+"\n      ")])}},{key:"startTime",fn:function(e,n){return[t._v("\n        "+t._s(t.$dateFormat(n.tasks.createdTime,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(e,s){return[n("a-space",{attrs:{size:"large"}},[n("a-button",{attrs:{type:"link"}},[n("a",{staticClass:"ant-dropdown-link",attrs:{href:"/course/"+s.tasks.courseId+"/manage/exam/activity/"+s.tasks.activityId+"/analysis",target:"_blank"}},[t._v("\n              答题分布\n            ")])]),t._v(" "),n("a-button",{attrs:{type:"link","data-target":"#modal","data-toggle":"modal","data-url":"/course/"+s.tasks.courseId+"/activity/"+s.tasks.activityId+"/testpaper/graph"}},[t._v("\n            成绩分布\n          ")])],1)]}}])})],1),t._v(" "),n("a-modal",{attrs:{visible:t.modalVisible,footer:null,title:t.currentTask.assessment?t.currentTask.assessment.name:"",width:920},on:{cancel:function(e){t.modalVisible=!1}}},[n("a-tabs",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[n("a-tab-pane",{key:0,attrs:{tab:"全部"}}),t._v(" "),n("a-tab-pane",{key:1,attrs:{tab:"未批阅"}}),t._v(" "),n("a-tab-pane",{key:2,attrs:{tab:"进行中"}}),t._v(" "),n("a-tab-pane",{key:3,attrs:{tab:"已批阅"}})],1),t._v(" "),t.examResults?n("a-table",{attrs:{columns:t.resultColumns,"data-source":t.examResults.data,pagination:t.examPaging[t.status[t.currentTab]]},on:{change:t.handleExamTableChange},scopedSlots:t._u([{key:"nickname",fn:function(e,n){return[t._v(t._s(n.userInfo.nickname))]}},{key:"grade",fn:function(e,n){return[t._v(t._s("reviewing"===n.status?"--":t.gradeMap[n.answerReportInfo.grade]))]}},{key:"teacherInfo",fn:function(e,n){return[t._v(t._s(n.teacherInfo.nickname||"--"))]}},{key:"status",fn:function(e){return[t._v("\n        "+t._s(t.statusMap[e])+"\n      ")]}},{key:"end_time",fn:function(e){return[t._v("\n        "+t._s(t.$dateFormat(e,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(e,s){return["reviewing"===s.status?n("a",{attrs:{href:"testpaper"===t.currentTask.type?"/course/"+t.currentTask.courseId+"/manage/testpaper/"+s.id+"/check?action=check":"/course/"+t.currentTask.courseId+"/manage/homework/"+s.id+"/check?action=check",target:"_blank"}},[t._v("去批阅")]):"finished"===s.status?n("a",{attrs:{href:"/homework/result/"+s.id+"/show?action=check",target:"_blank"}},[t._v("查看结果")]):t._e()]}}],null,!1,611143252)}):t._e()],1)],1)}),[],!1,null,null,null);e.default=j.exports}}]);