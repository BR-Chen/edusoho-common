(window.webpackJsonp=window.webpackJsonp||[]).push([[406],{106:function(e,t,s){e.exports=s(340)},127:function(e,t,s){e.exports=s(515)},1284:function(e,t,s){"use strict";s.r(t);var n=s(127),a=s.n(n),r=s(106),i=s.n(r),o=s(79),u=s.n(o),l=s(68),c=s.n(l),d=s(80),p=s.n(d),f=s(45),m=s.n(f),h=s(37),v=s.n(h),g=s(16),_=s.n(g),b=s(338),k=s.n(b),w=s(441),y=s.n(w),S=s(17),C=s.n(S),x=s(382),I=s.n(x),R=s(1313),T={props:{visible:{type:Boolean,required:!0,default:!1},multiClass:{type:Object,required:!0,default:{}}},data:function(){return{form:this.$form.createForm(this,{name:"add_student"})}},methods:{handleCancel:function(){this.$emit("handle-cancel"),this.form.resetFields()},handleSubmit:function(){var e=this;return y()(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.form.validateFields((function(t,s){console.log(t),t||R.m.add({id:e.multiClass.id,userInfo:s.name,price:s.price,remark:s.remark}).then((function(t){e.$message.success("学员添加成功！",2),e.visible=!1,window.location.reload()})).catch((function(t){e.$message.warning("学员添加失败！",2)}))}));case 1:case"end":return t.stop()}}),t)})))()},validatorName:I.a.debounce(function(){var e=y()(k.a.mark((function e(t,s,n){var a,r,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.c.checkStudentName(this.multiClass?this.multiClass.courseId:0,{title:s});case 2:if(a=e.sent,r=a.result,i=a.message,r){e.next=8;break}return this.form.setFields({name:{value:s,errors:[new Error(i)]}}),e.abrupt("return");case 8:n();case 9:case"end":return e.stop()}}),e,this)})));return function(t,s,n){return e.apply(this,arguments)}}(),300),validatorPrice:function(e,t,s){/^[0-9]{0,8}(\.\d{0,2})?$/.test(t)?s():s(new Error(Translator.trans("validate.positive_currency.message")))},maxPrice:function(e,t,s){C()(t)>this.multiClass.course.price?s(new Error(Translator.trans("course_manage.student_create.price_max_error_hint"))):s()}}},M=s(30),P=Object(M.a)(T,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-modal",{attrs:{title:"添加学员",visible:e.visible},on:{cancel:e.handleCancel}},[s("a-form",{attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:20}}},[s("a-form-item",{attrs:{label:"学员",extra:"只能添加系统中已经注册的用户"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入学员"},{validator:e.validatorName}]}],expression:"['name', { rules: [\n          { required: true, message: '请输入学员' },\n          { validator: validatorName }\n        ]}]"}],attrs:{placeholder:"邮箱／手机／用户名"}})],1),e._v(" "),e.multiClass.course.price?s("a-form-item",{attrs:{label:"购买价格",extra:"本课程的价格为 "+e.multiClass.course.price+" 元"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["price",{initialValue:e.multiClass.course.price,rules:[{validator:e.validatorPrice},{validator:e.maxPrice}]}],expression:"['price',\n        {\n          initialValue: multiClass.course.price,\n          rules: [\n            { validator: validatorPrice },\n            { validator: maxPrice }\n          ]\n        }]"}],attrs:{type:"text",suffix:"元"}})],1):e._e(),e._v(" "),s("a-form-item",{attrs:{label:"备注",extra:"选填"}},[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}]})],1)],1),e._v(" "),s("template",{slot:"footer"},[s("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n      取消\n    ")]),e._v(" "),s("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n      确认\n    ")])],1)],2)}),[],!1,null,null,null).exports,$={props:{visible:{type:Boolean,required:!0,default:!1}},methods:{handleCancel:function(){this.$emit("handle-cancel")}}},H=Object(M.a)($,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-modal",{attrs:{title:"学员信息",visible:e.visible,footer:null},on:{cancel:e.handleCancel}},[s("a-descriptions",{attrs:{bordered:"",column:1}},[s("a-descriptions-item",{attrs:{label:"用户名"}},[e._v("\n      Zhou Maomao\n    ")]),e._v(" "),s("a-descriptions-item",{attrs:{label:"Email"}},[e._v("\n      1810000000\n    ")]),e._v(" "),s("a-descriptions-item",{attrs:{label:"用户组"}},[e._v("\n      Hangzhou, Zhejiang\n    ")]),e._v(" "),s("a-descriptions-item",{attrs:{label:"用户名"}},[e._v("\n      Zhou Maomao\n    ")]),e._v(" "),s("a-descriptions-item",{attrs:{label:"Email"}},[e._v("\n      1810000000\n    ")]),e._v(" "),s("a-descriptions-item",{attrs:{label:"用户组"}},[e._v("\n      Hangzhou, Zhejiang\n    ")]),e._v(" "),s("a-descriptions-item",{attrs:{label:"Address"}},[e._v("\n      No. 18, Wantang Road, Xihu District, Hangzhou, Zhejiang, China\n    ")]),e._v(" "),s("a-descriptions-item",{attrs:{label:"Remark"}},[e._v("\n      empty\n    ")])],1)],1)}),[],!1,null,null,null).exports,j={props:{visible:{type:Boolean,required:!0,default:!1},multiClass:{type:Object,required:!0,default:{}},selectedStudentIds:{type:Array,required:!0,default:{}},multiClassId:{required:!0,default:0}},data:function(){return{form:this.$form.createForm(this),assistant:{list:[],title:"",initialValue:[]}}},created:function(){this.fetchAssistants()},methods:{fetchAssistants:function(){var e=this,t=this.assistant.title,s={id:this.multiClassId};t&&(s.nickname=t),R.i.search(s).then((function(t){e.assistant.list=I.a.concat(e.assistant.list,t)}))},handleSearchAssistant:I.a.debounce((function(e){this.assistant={list:[],title:e},this.fetchAssistants()}),200),handleCancel:function(){this.$emit("handle-cancel"),this.form.resetFields()},handleSubmit:function(){var e=this;return y()(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.form.validateFields((function(t,s){console.log(t),t||R.a.add({assistantId:s.assistantId,multiClassId:e.multiClass.id,studentIds:e.selectedStudentIds}).then((function(t){e.$message.success("助教修改成功！",2),e.$emit("handle-cancel"),window.location.reload()})).catch((function(t){e.$message.warning("助教修改失败",2)}))}));case 1:case"end":return t.stop()}}),t)})))()}}},O=Object(M.a)(j,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-modal",{attrs:{title:"批量修改助教",visible:e.visible},on:{cancel:e.handleCancel}},[s("a-form",{attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:20}}},[s("a-form-item",{attrs:{label:"选择助教"}},[s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["assistantId",{initialValue:e.assistant.initialValue,rules:[{required:!0,message:"请选择助教"}]}],expression:"['assistantId', {\n          initialValue: assistant.initialValue,\n          rules: [\n            { required: true, message: '请选择助教' }\n          ]\n        }]"}],attrs:{"show-search":"","filter-option":!1,placeholder:"请选择助教"},on:{search:e.handleSearchAssistant}},e._l(e.assistant.list,(function(t){return s("a-select-option",{key:t.id},[e._v("\n          "+e._s(t.nickname)+"\n        ")])})),1)],1)],1),e._v(" "),s("template",{slot:"footer"},[s("a-button",{key:"back",on:{click:e.handleCancel}},[e._v("\n      取消\n    ")]),e._v(" "),s("a-button",{key:"submit",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("\n      确认\n    ")])],1)],2)}),[],!1,null,null,null).exports,V=s(1346),z={name:"ChangeGroupModal",components:{},props:{visible:{type:Boolean,required:!0,default:!1},groupList:{type:Array,require:!0,default:{}},selectedStudentIds:{type:Array,required:!0,default:{}},multiClassId:{required:!0,default:0}},data:function(){return{form:{group:void 0},rules:{group:[{required:!0,message:"请选择分组",trigger:"change"}]}}},computed:{},created:function(){},methods:{handleCancel:function(){this.$emit("handle-cancel"),this.$refs.form.resetFields()},handleOk:function(){var e=this;this.$refs.form.validate().then(y()(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.m.editGroup(e.multiClassId,e.form.group,{studentIds:e.selectedStudentIds});case 2:e.$message.success("分组修改成功！"),e.handleCancel();case 4:case"end":return t.stop()}}),t)})))).catch((function(t){e.$message.warning("分组修改失败")}))}}},L=Object(M.a)(z,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-modal",{attrs:{visible:e.visible,title:"批量变更分组"},on:{cancel:e.handleCancel,ok:e.handleOk}},[s("a-form-model",{ref:"form",attrs:{model:e.form,"label-col":{span:4},"wrapper-col":{span:20},rules:e.rules}},[s("a-form-model-item",{attrs:{label:"选择分组",prop:"group"}},[s("a-select",{attrs:{"show-search":"",placeholder:"请选择分组"},model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}},e._l(e.groupList,(function(t){return s("a-select-option",{key:t.id},[e._v("\n          "+e._s(t.name)+"\n        ")])})),1)],1)],1)],1)}),[],!1,null,"1a316ba7",null).exports;function E(e,t){var s=m()(e);if(p.a){var n=p()(e);t&&(n=n.filter((function(t){return c()(e,t).enumerable}))),s.push.apply(s,n)}return s}function F(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){v()(e,t,s[t])})):u.a?i()(e,u()(s)):E(Object(s)).forEach((function(t){a()(e,t,c()(s,t))}))}return e}var q=[{title:"学员",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"手机号",dataIndex:"phone",scopedSlots:{customRender:"phone"}},{title:"学习进度",dataIndex:"learningProgressPercent",scopedSlots:{customRender:"learningProgressPercent"}},{title:"助教老师",dataIndex:"assistant",width:"10%",ellipsis:!0,scopedSlots:{customRender:"assistant"}},{title:"提问",dataIndex:"threadCount",scopedSlots:{customRender:"threadCount"}},{title:"作业提交",dataIndex:"finishedHomeworkCount",scopedSlots:{customRender:"finishedHomeworkCount"}},{title:"试卷提交",dataIndex:"finishedTestpaperCount",scopedSlots:{customRender:"finishedTestpaperCount"}},{title:"分组",dataIndex:"group.name"},{title:"有效期",dataIndex:"deadline",scopedSlots:{customRender:"deadline"}},{title:"报名时间",dataIndex:"createdTime",scopedSlots:{customRender:"createdTime"}},{title:"操作",dataIndex:"actions",scopedSlots:{customRender:"actions"}}],K=[{title:"课时",dataIndex:"activity",scopedSlots:{customRender:"lesson"},width:"15%",ellipsis:!0},{title:"作业/考试",dataIndex:"answerScene",scopedSlots:{customRender:"exam"},width:"15%",ellipsis:!0},{title:"提交时间",dataIndex:"end_time",scopedSlots:{customRender:"end_time"}},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"批阅人",dataIndex:"teacherInfo",scopedSlots:{customRender:"teacherInfo"}},{title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"}}],U={all:{total:0,offset:0,pageSize:5},reviewing:{total:0,offset:0,pageSize:5},doing:{total:0,offset:0,pageSize:5},finished:{total:0,offset:0,pageSize:5}},Y={components:{AddStudentModal:P,StudentInfoModal:H,AssistantListModal:O,userInfoTable:V.a,ChangeGroupModal:L},data:function(){return{groupList:[],resultColumns:K,students:[],modalShowUser:{},selectedUser:{},multiClass:{course:{id:0}},columns:q,selectedRowKeys:[],selectedRowKeysStr:"",selectedUserIds:[],loading:!1,addStudentVisible:!1,viewStudentInfoVisible:!1,changeGroupVisible:!1,assistantListModalVisible:!1,selectedStudentIds:[],id:this.$route.params.id,getListLoading:!1,keyword:"",groupId:"",paging:{total:0,offset:0,pageSize:10},testpaperPaging:U,homeworkPaging:U,status:["all","reviewing","doing","finished"],statusMap:{doing:"进行中",paused:"暂停",reviewing:"未批阅",finished:"已批阅"},gradeMap:{excellent:"优秀",good:"良好",passed:"合格",unpassed:"不合格"},homeworkResultList:{type:Object,required:!0,default:{}},testpaperResultList:{type:Object,required:!0,default:{}},currentHomeworkTab:0,currentTestpaperTab:0,homeworkModalVisible:!1,testpaperModalVisible:!1}},computed:{hasSelected:function(){return this.selectedRowKeys.length>0},testpaperResults:function(){var e=this.status[this.currentTestpaperTab];return this.testpaperResultList[e]},homeworkResults:function(){var e=this.status[this.currentHomeworkTab];return this.homeworkResultList[e]}},watch:{currentTestpaperTab:function(e){this.getTestpaperResults(e)},currentHomeworkTab:function(e){this.getHomeworkResults(e)}},created:function(){var e=this;return y()(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.getMultiClassStudents(),t.next=3,e.getMultiClass();case 3:return t.next=5,e.getMultiClassStudentsGroup();case 5:case"end":return t.stop()}}),t)})))()},befeoreRouteUpdate:function(e,t,s){this.id=e.params.id,s()},methods:{onHomeworkModalCancel:function(){this.homeworkModalVisible=!1,this.currentHomeworkTab=0,this.homeworkPaging=U,this.homeworkResultList={}},onTestpaperModalCancel:function(){this.testpaperModalVisible=!1,this.currentTestpaperTab=0,this.testpaperPaging=U,this.testpaperResultList={}},getMultiClassStudentsGroup:function(){var e=this;return y()(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.m.getGroup(e.multiClass.id);case 2:e.groupList=t.sent;case 3:case"end":return t.stop()}}),t)})))()},updateStudentList:function(){this.changeGroupVisible=!1,this.getMultiClassStudents(),this.getMultiClassStudentsGroup()},getMultiClassStudents:function(){var e=arguments,t=this;return y()(k.a.mark((function s(){var n,a,r,i;return k.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:{},s.next=3,R.m.search({id:t.id,keyword:n.keyword||t.keyword||"",groupId:n.groupId||t.groupId||"",offset:n.offset||t.paging.offset||0,limit:n.limit||t.paging.pageSize||10});case 3:a=s.sent,r=a.data,i=a.paging,t.students=r,i.page=i.offset/i.limit+1,t.paging=_()(t.paging,i);case 9:case"end":return s.stop()}}),s)})))()},handleTestpaperTableChange:function(e){var t=this.status[this.currentTestpaperTab],s=F({},this.testpaperPaging[t]);s.current=e.current,s.offset=(e.current-1)*e.pageSize,this.testpaperPaging[t]=s;var n={limit:e.pageSize,offset:(e.current-1)*e.pageSize};this.getTestpaperResults(this.currentTestpaperTab,n)},handleHomeworkTableChange:function(e){var t=this.status[this.currentHomeworkTab],s=F({},this.homeworkPaging[t]);s.current=e.current,s.offset=(e.current-1)*e.pageSize,this.homeworkPaging[t]=s;var n={limit:e.pageSize,offset:(e.current-1)*e.pageSize};console.log(this.homeworkPaging),console.log(n),this.getHomeworkResults(this.currentHomeworkTab,n)},handleStudentTableChange:function(e){var t=F({},this.paging);t.current=e.current,t.offset=(e.current-1)*e.pageSize,this.paging=t;var s={limit:e.pageSize,offset:(e.current-1)*e.pageSize};this.getMultiClassStudents(s)},getMultiClass:function(){var e=this;return y()(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.h.get(e.id);case 2:e.multiClass=t.sent;case 3:case"end":return t.stop()}}),t)})))()},onRemoveStudent:function(e){var t=this;R.m.deleteMultiClassMember(this.multiClass.id,e).then((function(e){t.getMultiClassStudents(),t.getMultiClassStudentsGroup(),t.$message.success("移除学员成功！")})).catch((function(e){t.$message.warning("移除学员失败！")}))},onSearch:function(e){this.keyword=e,this.getMultiClassStudents({keyword:e})},onClickHomeworkModal:function(e){this.selectedUser=e,this.getHomeworkResults(),this.homeworkModalVisible=!0},onClickTestpaperModal:function(e){this.selectedUser=e,this.getTestpaperResults(),this.testpaperModalVisible=!0},start:function(){var e=this;this.loading=!0,setTimeout((function(){e.loading=!1,e.selectedRowKeys=[]}),1e3)},onSelectChange:function(e){this.selectedRowKeys=e,this.getSelectedRowKeysQueryStr()},getHomeworkResults:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.status[t];R.n.searchStudentExamResults(this.$route.params.id,this.selectedUser.id,{status:n,type:"homework",offset:s.offset||this.homeworkPaging[n].offset||U[n].offset,limit:s.limit||this.homeworkPaging[n].pageSize||U[n].pageSize}).then((function(t){t.paging.page=t.paging.offset/t.paging.limit+1,e.homeworkPaging[n]=_()(e.homeworkPaging[n],t.paging),console.log(e.homeworkPaging[n]),e.$set(e.homeworkResultList,n,t)}))},getTestpaperResults:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.status[t];R.n.searchStudentExamResults(this.$route.params.id,this.selectedUser.id,{status:n,type:"testpaper",offset:s.offset||this.testpaperPaging[n].offset||U[n].offset,limit:s.limit||this.testpaperPaging[n].pageSize||U[n].pageSize}).then((function(t){t.paging.page=t.paging.offset/t.paging.limit+1,e.testpaperPaging[n]=_()(e.testpaperPaging[n],t.paging),e.$set(e.testpaperResultList,n,t)}))},addStudent:function(){this.addStudentVisible=!0},close:function(){this.viewStudentInfoVisible=!1},viewStudentInfo:function(e){var t=this;return y()(k.a.mark((function s(){return k.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,R.s.get(e.id);case 2:t.modalShowUser=s.sent,t.viewStudentInfoVisible=!0;case 5:case"end":return s.stop()}}),s)})))()},clickBatchUpdateAssistantModal:function(){0!==this.selectedRowKeys.length?(this.assistantListModalVisible=!0,this.selectedStudentIds=this.selectedUserIds):this.$message.error("请至少选中一项后修改",1)},clickBatchStudentGroupModal:function(){0!==this.selectedRowKeys.length?(this.changeGroupVisible=!0,this.selectedStudentIds=this.selectedUserIds):this.$message.error("请至少选中一项后修改",1)},onBatchRemoveStudent:function(){if(0!==this.selectedRowKeys.length){var e=this;this.$confirm({title:"是否移除这些学员？",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){R.m.batchDeleteClassMember(e.multiClass.id,{userIds:e.selectedUserIds}).then((function(t){e.getMultiClassStudents(),e.$message.success("移除学员成功！"),e.selectedRowKeys=[]})).catch((function(t){e.$message.warning("移除学员失败！")}))},onCancel:function(){console.log("Cancel")}})}else this.$message.error("请至少选中一项后移除",1)},onGroupClick:function(e){var t=e.key;this.groupId=t,this.getMultiClassStudents({groupId:t})},onSelectEmpty:function(){this.$message.error("请至少选中一项后进行修改！",1)},confirm:function(e){this.onRemoveStudent(e)},getSelectedRowKeysQueryStr:function(){var e=this,t="",s=[];this.selectedRowKeys&&this.selectedRowKeys.forEach((function(n,a){e.students.forEach((function(e,a){e.id==n&&(t="".concat(t,"&ids[]=").concat(e.user.id),s.push(e.user.id))}))})),this.selectedRowKeysStr=t,this.selectedUserIds=s}}},G=(s(1498),Object(M.a)(Y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"student-manage"},[s("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"24px"}},[s("a-input-search",{staticClass:"pull-left",staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名或手机号搜索"},on:{search:e.onSearch}}),e._v(" "),s("a-space",{staticClass:"pull-left cd-ml16",attrs:{size:"middle"}},[s("a-button",{attrs:{icon:"plus",type:"primary"},on:{click:function(t){return e.addStudent()}}},[e._v("\n        添加学员\n      ")]),e._v(" "),s("a-button",{attrs:{type:"primary","data-toggle":"modal","data-target":"#modal","data-backdrop":"static","data-keyboard":"false","data-url":"/importer/course-member/index?courseId="+e.multiClass.course.id}},[s("a-space",[s("svg-icon",{attrs:{icon:"icon-import"}}),e._v("\n          批量导入\n        ")],1)],1),e._v(" "),s("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.clickBatchUpdateAssistantModal()}}},[s("a-space",[s("svg-icon",{attrs:{icon:"icon-edit"}}),e._v("\n          修改助教\n        ")],1)],1),e._v(" "),s("a-button",{attrs:{type:"primary"},on:{click:e.onBatchRemoveStudent}},[s("a-space",[s("svg-icon",{attrs:{icon:"icon-remove"}}),e._v("\n          批量移除\n        ")],1)],1),e._v(" "),0===e.selectedRowKeys.length?s("a-button",{attrs:{type:"primary"},on:{click:e.onSelectEmpty}},[s("a-space",[s("svg-icon",{attrs:{icon:"icon-edit"}}),e._v("\n          批量修改有效期\n        ")],1)],1):e._e(),e._v(" "),e.selectedRowKeys.length>0?s("a-button",{attrs:{type:"primary","data-toggle":"modal","data-target":"#modal","data-backdrop":"static","data-keyboard":"false","data-url":"/course_set/"+e.multiClass.course.courseSetId+"/manage/course/"+e.multiClass.course.id+"/student/deadline?"+e.selectedRowKeysStr}},[s("a-space",[s("svg-icon",{attrs:{icon:"icon-edit"}}),e._v("\n          批量修改有效期\n        ")],1)],1):e._e(),e._v(" "),"group"===e.multiClass.type?s("a-button",{attrs:{type:"primary"},on:{click:e.clickBatchStudentGroupModal}},[s("a-space",[s("svg-icon",{attrs:{icon:"icon-change"}}),e._v("\n          变更分组\n        ")],1)],1):e._e()],1),e._v(" "),s("a-space",{staticClass:"right-export",attrs:{size:"middle"}},[s("a-button",{staticClass:"js-export-btn",attrs:{type:"primary",href:"javascript:;","data-try-url":"/try/export/course-students","data-url":"/export/course-students","data-pre-url":"/pre/export/course-students","data-loading-text":"正在导出...","data-target-form":"#course-students-export","data-file-names":'["course-students"]'}},[s("a-space",[s("svg-icon",{attrs:{icon:"icon-export"}}),e._v("\n          批量导出\n        ")],1)],1)],1)],1),e._v(" "),s("a-modal",{attrs:{title:"学员详细信息",visible:e.viewStudentInfoVisible},on:{cancel:e.close}},[s("userInfoTable",{attrs:{user:e.modalShowUser}}),e._v(" "),s("template",{slot:"footer"},[s("a-button",{key:"back",on:{click:e.close}},[e._v(" 关闭 ")])],1)],2),e._v(" "),s("div",[s("a-row",["group"===e.multiClass.type?s("a-col",{attrs:{span:3}},[s("div",{staticClass:"student-group"},[e._v("学员分组")]),e._v(" "),s("a-menu",{attrs:{mode:"inline"},on:{select:e.onGroupClick}},[s("a-menu-item",{key:""},[s("span",[e._v("全部学员")])]),e._v(" "),e._l(e.groupList,(function(t){return s("a-menu-item",{key:t.id},[s("span",[e._v(e._s(t.name))]),e._v(" "),s("span",[e._v("("+e._s(t.student_num)+")")]),e._v(" "),s("span",{staticStyle:{"margin-left":"4px"}},[e._v(e._s(t.assistant.nickname))])])}))],2)],1):e._e(),e._v(" "),s("a-col",{attrs:{span:"group"===e.multiClass.type?21:24}},[s("a-table",{attrs:{"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,"row-key":function(e){return e.id},pagination:e.paging,"data-source":e.students},on:{change:e.handleStudentTableChange},scopedSlots:e._u([{key:"name",fn:function(t,n){return s("a",{on:{click:function(t){return e.viewStudentInfo(n.user)}}},[e._v(e._s(n.user.nickname)),n.user.truename?s("span",[e._v("("+e._s(n.user.truename)+")")]):e._e()])}},{key:"phone",fn:function(t,s){return[e._v(e._s(s.user.verifiedMobile||"--"))]}},{key:"learningProgressPercent",fn:function(t,n){return s("a",{attrs:{"data-toggle":"modal","data-target":"#modal","data-url":"/course_set/"+e.multiClass.course.courseSetId+"/manage/course/"+e.multiClass.course.id+"/students/"+n.user.id+"/process"}},[e._v(e._s(t)+"%")])}},{key:"assistant",fn:function(t){return[e._v(e._s(t.nickname))]}},{key:"threadCount",fn:function(t){return[e._v(e._s(t))]}},{key:"finishedHomeworkCount",fn:function(t,n){return s("a",{on:{click:function(t){return e.onClickHomeworkModal(n.user)}}},[e._v(e._s(t)+"/"+e._s(n.homeworkCount))])}},{key:"finishedTestpaperCount",fn:function(t,n){return s("a",{on:{click:function(t){return e.onClickTestpaperModal(n.user)}}},[e._v(e._s(t)+"/"+e._s(n.testpaperCount))])}},{key:"deadline",fn:function(t){return[e._v(e._s(e.$dateFormat(t,"YYYY-MM-DD HH:mm")||"--"))]}},{key:"createdTime",fn:function(t){return[e._v(e._s(e.$dateFormat(t,"YYYY-MM-DD HH:mm")||"--"))]}},{key:"actions",fn:function(t,n){return[s("a-space",{attrs:{size:"middle"}},[s("a",{staticClass:"ant-dropdown-link",on:{click:function(t){return e.viewStudentInfo(n.user)}}},[e._v("查看")]),e._v(" "),s("a-popconfirm",{attrs:{title:"确定移除?","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(t){return e.confirm(n.user.id)}}},[s("span",{staticStyle:{color:"#fe4040",cursor:"pointer"}},[e._v("移除")])])],1)]}}])})],1)],1)],1),e._v(" "),s("assistant-list-modal",{attrs:{visible:e.assistantListModalVisible,"multi-class-id":e.id,"multi-class":e.multiClass,"selected-student-ids":e.selectedStudentIds},on:{"handle-cancel":function(t){e.assistantListModalVisible=!1}}}),e._v(" "),s("add-student-modal",{attrs:{visible:e.addStudentVisible,"multi-class":e.multiClass},on:{"handle-cancel":function(t){e.addStudentVisible=!1}}}),e._v(" "),s("change-group-modal",{attrs:{visible:e.changeGroupVisible,groupList:e.groupList,"multi-class-id":e.id,"multi-class":e.multiClass,"selected-student-ids":e.selectedStudentIds},on:{"handle-cancel":e.updateStudentList}}),e._v(" "),s("form",{staticClass:"hide",attrs:{id:"course-students-export"}},[s("input",{attrs:{type:"hidden",name:"courseSetId"},domProps:{value:e.multiClass.course.courseSetId}}),e._v(" "),s("input",{attrs:{type:"hidden",name:"courseId"},domProps:{value:e.multiClass.course.id}})]),e._v(" "),s("a-modal",{attrs:{visible:e.homeworkModalVisible,footer:null,title:e.selectedUser.nickname+" - 作业",width:920},on:{cancel:e.onHomeworkModalCancel}},[s("a-tabs",{model:{value:e.currentHomeworkTab,callback:function(t){e.currentHomeworkTab=t},expression:"currentHomeworkTab"}},[s("a-tab-pane",{key:0,attrs:{tab:"全部"}}),e._v(" "),s("a-tab-pane",{key:1,attrs:{tab:"未批阅"}}),e._v(" "),s("a-tab-pane",{key:2,attrs:{tab:"进行中"}}),e._v(" "),s("a-tab-pane",{key:3,attrs:{tab:"已批阅"}})],1),e._v(" "),e.homeworkResults?s("a-table",{attrs:{columns:e.resultColumns,"data-source":e.homeworkResults.data,pagination:e.homeworkPaging[e.status[e.currentHomeworkTab]]},on:{change:e.handleHomeworkTableChange},scopedSlots:e._u([{key:"lesson",fn:function(t,s){return[e._v(e._s(t.title||"--"))]}},{key:"exam",fn:function(t,s){return[e._v(e._s(t.name||"--"))]}},{key:"teacherInfo",fn:function(t,s){return[e._v(e._s(s.teacherInfo.nickname||"--"))]}},{key:"status",fn:function(t){return[e._v("\n        "+e._s(e.statusMap[t])+"\n      ")]}},{key:"end_time",fn:function(t){return[e._v("\n        "+e._s(e.$dateFormat(t,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(t,n){return["reviewing"===n.status?s("a",{attrs:{href:"testpaper"===n.activity.mediaType?"/course/"+e.multiClass.course.id+"/manage/testpaper/"+n.id+"/check?action=check":"/course/"+e.multiClass.course.id+"/manage/homework/"+n.id+"/check?action=check",target:"_blank"}},[e._v("去批阅")]):"finished"===n.status?s("a",{attrs:{href:"/testpaper/result/"+n.id+"/show?action=check",target:"_blank"}},[e._v("查看结果")]):["doing","paused"].includes(n.status)?s("span",[e._v("--")]):e._e()]}}],null,!1,4202466841)}):e._e()],1),e._v(" "),s("a-modal",{attrs:{visible:e.testpaperModalVisible,footer:null,title:e.selectedUser.nickname+" - 试卷",width:920},on:{cancel:e.onTestpaperModalCancel}},[s("a-tabs",{model:{value:e.currentTestpaperTab,callback:function(t){e.currentTestpaperTab=t},expression:"currentTestpaperTab"}},[s("a-tab-pane",{key:0,attrs:{tab:"全部"}}),e._v(" "),s("a-tab-pane",{key:1,attrs:{tab:"未批阅"}}),e._v(" "),s("a-tab-pane",{key:2,attrs:{tab:"进行中"}}),e._v(" "),s("a-tab-pane",{key:3,attrs:{tab:"已批阅"}})],1),e._v(" "),e.testpaperResults?s("a-table",{attrs:{columns:e.resultColumns,"data-source":e.testpaperResults.data,pagination:e.testpaperPaging[e.status[e.currentTestpaperTab]]},on:{change:e.handleTestpaperTableChange},scopedSlots:e._u([{key:"lesson",fn:function(t,s){return[e._v(e._s(t.title||"--"))]}},{key:"exam",fn:function(t,s){return[e._v(e._s(t.name||"--"))]}},{key:"teacherInfo",fn:function(t,s){return[e._v(e._s(s.teacherInfo.nickname||"--"))]}},{key:"status",fn:function(t){return[e._v("\n        "+e._s(e.statusMap[t])+"\n      ")]}},{key:"end_time",fn:function(t){return[e._v("\n        "+e._s(e.$dateFormat(t,"YYYY-MM-DD HH:mm"))+"\n      ")]}},{key:"action",fn:function(t,n){return["reviewing"===n.status?s("a",{attrs:{href:"/course/"+e.multiClass.course.id+"/manage/testpaper/"+n.id+"/check?action=check",target:"_blank"}},[e._v("去批阅")]):"finished"===n.status?s("a",{attrs:{href:"/testpaper/result/"+n.id+"/show?action=check",target:"_blank"}},[e._v("查看结果")]):["doing","paused"].includes(n.status)?s("span",[e._v("--")]):e._e()]}}],null,!1,3025023754)}):e._e()],1)],1)}),[],!1,null,null,null));t.default=G.exports},1316:function(e,t,s){s(1317),e.exports=s(48).Reflect.deleteProperty},1317:function(e,t,s){var n=s(78),a=s(181).f,r=s(132);n(n.S,"Reflect",{deleteProperty:function(e,t){var s=a(r(e),t);return!(s&&!s.configurable)&&delete e[t]}})},1326:function(e,t,s){e.exports=s(1316)},1346:function(e,t,s){"use strict";var n={props:{user:{type:Object,default:{}}},computed:{getUserRoles:function(){return _.join(this.user.user.roles," ")}},methods:{toPersonalHomepage:function(e){window.open("/user/"+e+"/about","_blank")},formatTimeIp:function(e,t){var s="";return s+=0!=e?this.$dateFormat(e,"YYYY-MM-DD HH:mm"):" -- ",""!=t&&(s+=" / "+t+" 本机IP"),s},formatStr:function(e){return void 0===e||""==e||null==e?"暂无":e},formatGender:function(){return{male:"男性",female:"女性",secret:"秘密"}[this.user.profile.gender]}}},a=s(30),r=Object(a.a)(n,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("table",{staticClass:"table table-striped table-condenseda table-bordered"},[s("tbody",[s("tr",[s("th",{attrs:{width:"30%"}},[e._v("用户名")]),e._v(" "),s("td",{attrs:{width:"70%"}},[s("a",{staticClass:"pull-right",attrs:{href:"javascript:;"},on:{click:function(t){return e.toPersonalHomepage(e.user.user.id)}}},[e._v("个人主页")]),e._v("\n        "+e._s(e.user.user.nickname)+"\n      ")])]),e._v(" "),s("tr",[s("th",[e._v("Email")]),e._v(" "),s("td",[e._v(e._s(e.user.profile.email||"- -"))])]),e._v(" "),s("tr",[s("th",[e._v("用户组")]),e._v(" "),s("td",[e._v(e._s(e.getUserRoles))])]),e._v(" "),s("tr",[s("th",[e._v("注册时间/IP")]),e._v(" "),s("td",[e._v(e._s(e.formatTimeIp(e.user.user.createdTime,e.user.user.createdIp)))])]),e._v(" "),s("tr",[s("th",[e._v("最近登录时间/IP")]),e._v(" "),s("td",[e._v(e._s(e.formatTimeIp(e.user.user.loginTime,e.user.user.loginIp)))])]),e._v(" "),s("tr",[s("th",[e._v("姓名")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.truename)))])]),e._v(" "),s("tr",[s("th",[e._v("性别")]),e._v(" "),s("td",[e._v(e._s(e.formatGender()))])]),e._v(" "),s("tr",[s("th",[e._v("身份证号")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.idcard)))])]),e._v(" "),s("tr",[s("th",[e._v("手机号码")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.mobile)))])]),e._v(" "),s("tr",[s("th",[e._v("公司")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.company)))])]),e._v(" "),s("tr",[s("th",[e._v("职业")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.job)))])]),e._v(" "),s("tr",[s("th",[e._v("头衔")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.user.title)))])]),e._v(" "),s("tr",[s("th",[e._v("个人签名")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.signature)))])]),e._v(" "),s("tr",[s("th",[e._v("自我介绍")]),e._v(" "),s("td",{domProps:{innerHTML:e._s(e.user.profile.about||"暂无")}})]),e._v(" "),s("tr",[s("th",[e._v("个人网站")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.site)))])]),e._v(" "),s("tr",[s("th",[e._v("微博")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.weibo)))])]),e._v(" "),s("tr",[s("th",[e._v("微信")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.weixin)))])]),e._v(" "),s("tr",[s("th",[e._v("QQ")]),e._v(" "),s("td",[e._v(e._s(e.formatStr(e.user.profile.qq)))])])])])}),[],!1,null,null,null);t.a=r.exports},1394:function(e,t,s){},1498:function(e,t,s){"use strict";var n=s(1394);s.n(n).a},16:function(e,t,s){e.exports=s(516)},17:function(e,t,s){e.exports=s(599)},2:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},208:function(e,t,s){s(209);var n=s(48).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},209:function(e,t,s){var n=s(133),a=s(181).f;s(339)("getOwnPropertyDescriptor",(function(){return function(e,t){return a(n(e),t)}}))},3:function(e,t,s){var n=s(127);function a(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),n(e,a.key,a)}}e.exports=function(e,t,s){return t&&a(e.prototype,t),s&&a(e,s),e}},339:function(e,t,s){var n=s(78),a=s(48),r=s(307);e.exports=function(e,t){var s=(a.Object||{})[e]||Object[e],i={};i[e]=t(s),n(n.S+n.F*r((function(){s(1)})),"Object",i)}},340:function(e,t,s){s(341);var n=s(48).Object;e.exports=function(e,t){return n.defineProperties(e,t)}},341:function(e,t,s){var n=s(78);n(n.S+n.F*!s(138),"Object",{defineProperties:s(383)})},342:function(e,t,s){s(343),e.exports=s(48).Object.getOwnPropertyDescriptors},343:function(e,t,s){var n=s(78),a=s(344),r=s(133),i=s(181),o=s(385);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,s,n=r(e),u=i.f,l=a(n),c={},d=0;l.length>d;)void 0!==(s=u(n,t=l[d++]))&&o(c,t,s);return c}})},344:function(e,t,s){var n=s(361),a=s(346),r=s(132),i=s(100).Reflect;e.exports=i&&i.ownKeys||function(e){var t=n.f(r(e)),s=a.f;return s?t.concat(s(e)):t}},345:function(e,t,s){s(384),e.exports=s(48).Object.getOwnPropertySymbols},37:function(e,t,s){var n=s(127);e.exports=function(e,t,s){return t in e?n(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}},45:function(e,t,s){e.exports=s(596)},473:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},522:function(e,t,s){var n=s(78),a=s(442),r=s(307),i=s(473),o="["+i+"]",u=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),c=function(e,t,s){var a={},o=r((function(){return!!i[e]()||"​"!="​"[e]()})),u=a[e]=o?t(d):i[e];s&&(a[s]=u),n(n.P+n.F*o,"String",a)},d=c.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(l,"")),e};e.exports=c},596:function(e,t,s){s(597),e.exports=s(48).Object.keys},597:function(e,t,s){var n=s(360),a=s(359);s(339)("keys",(function(){return function(e){return a(n(e))}}))},599:function(e,t,s){s(600),e.exports=s(48).parseFloat},600:function(e,t,s){var n=s(78),a=s(601);n(n.G+n.F*(parseFloat!=a),{parseFloat:a})},601:function(e,t,s){var n=s(100).parseFloat,a=s(522).trim;e.exports=1/n(s(473)+"-0")!=-1/0?function(e){var t=a(String(e),3),s=n(t);return 0===s&&"-"==t.charAt(0)?-0:s}:n},68:function(e,t,s){e.exports=s(208)},79:function(e,t,s){e.exports=s(342)},80:function(e,t,s){e.exports=s(345)}}]);