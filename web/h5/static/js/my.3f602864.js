(window.webpackJsonp=window.webpackJsonp||[]).push([["my"],{"5ede":function(t,e,s){"use strict";var i=s("240b");e.a={beforeRouteEnter:function(t,e,s){i.a.state.token?s():s({name:"prelogin",query:{redirect:t.fullPath}})}}},7067:function(t,e,s){"use strict";s("e17f");var i=s("2241"),r=(s("e7e5"),s("d399")),a=s("a026"),n=s("3ce7"),c=/micromessenger/.test(navigator.userAgent.toLowerCase());e.a=function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t||s&&!e)r.a.fail("缺少分享参数");else{var o={domainUri:location.origin,itemUri:"",source:"h5"};n.a.marketingActivities({query:{activityId:t},data:o}).then((function(t){var n=-1!==t.url.indexOf("?")?"&":"?",o=s?"".concat(e).concat(n,"ticket=").concat(t.ticket):t.url;c?window.location.href=o:i.a.confirm({message:"去微信完成活动",confirmButtonText:"复制链接",title:""}).then((function(){try{a.default.prototype.$copyText(o).then((function(){r.a.success("复制成功")}),(function(){r.a.fail("请更换浏览器复制")}))}catch(t){r.a.fail("请更换浏览器复制")}})).catch((function(){}))})).catch((function(t){r.a.fail(t.message)}))}}},8807:function(t,e,s){"use strict";s("a481"),s("ac6a"),s("456d"),s("7f7f"),s("c5f6"),s("8e6e");var i=s("bd86"),r=s("2f62");function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function n(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){Object(i.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var c={props:{type:{type:String,default:"price"},course:{type:Object,default:function(){return{}}},order:{type:Object,default:function(){return{}}}},data:function(){return{isFree:0==this.course.price}},computed:n(n({},Object(r.e)(["courseSettings"])),{},{rate:function(){return parseInt(this.course.publishedTaskNum)?parseInt(this.course.progress.percent):0},showStudent:function(){return!this.courseSettings||Number(this.courseSettings.show_student_num_enabled)}}),filters:{numFilter:function(t){return t?parseFloat(t).toFixed(2):""}},methods:{goToPay:function(){this.$router.replace({path:"/pay",query:{id:this.order.id,source:"order",sn:this.order.sn,targetId:this.order.targetId,targetType:this.order.targetType}})},displayPrice:function(t){var e,s=this.type;if("order"===s){var i=t.currency,r=t.coinAmount,a=t.coinName,n=t.amount;return"coin"===i?(e=r?(r/100).toFixed(2):"",e="".concat(e," ").concat(a)):"RMB"===i&&(e=n?(n/100).toFixed(2):"",e="¥ ".concat(e)),e}if("confirmOrder"===s){var c=t.priceType,o=t.coinPayAmount,l=t.coinName,u=t.totalPrice;return"Coin"===c?(e=o?parseFloat(o).toFixed(2):"",e="".concat(e," ").concat(l)):"RMB"===c&&(e="¥ ".concat(u)),e}}}},o=s("a6c2"),l={components:{switchBox:Object(o.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"e-course-switch-box"},["price"===t.type?s("div",{staticClass:"switch-box"},[s("span",{staticClass:"switch-box__price"},[t.isFree?s("p",{staticClass:"free"},[t._v("免费")]):t._e(),t.isFree?t._e():s("p",{staticClass:"price"},[t._v("¥ "+t._s(t.course.price))])]),s("span",{staticClass:"switch-box__state"},[t.showStudent?s("p",[t._v(t._s(t.course.studentNum)+"人在学")]):t._e()])]):t._e(),"order"===t.type?s("div",{staticClass:"switch-box"},[s("span",{staticClass:"switch-box__price"},[t.isFree?s("p",{staticClass:"free"},[t._v("免费")]):t._e(),t.isFree?t._e():s("p",{staticClass:"price"},[t._v("\n        "+t._s(t.displayPrice(t.order.priceConvert))+"\n      ")])]),s("span",{staticClass:"switch-box__state"},["created"!==t.order.status&&"paying"!==t.order.status?s("p",{class:t.order.status},[t._v("\n        "+t._s(t._f("filterOrderStatus")(t.order.status))+"\n      ")]):t._e(),"created"===t.order.status||"paying"===t.order.status?s("span",{staticClass:"order-pay",on:{click:t.goToPay}},[t._v(t._s(t._f("filterOrderStatus")(t.order.status)))]):t._e()])]):t._e(),"confirmOrder"===t.type?s("div",{staticClass:"switch-box"},[s("span",{staticClass:"switch-box__price"},[s("p",{staticClass:"price"},[t._v(t._s(t.displayPrice(t.order)))])])]):t._e(),"rank"===t.type?s("div",{staticClass:"rank-box"},[s("div",{staticClass:"progress round-conner"},[s("div",{staticClass:"curRate round-conner",style:{width:t.rate+"%"}})]),s("span",[t._v(t._s(this.rate)+"%")])]):t._e()])}),[],!1,null,null,null).exports},props:{course:{type:Object,default:function(){return{}}},order:{type:Object,default:function(){return{}}},type:{type:String,default:"price"},feedback:{type:Boolean,default:!0},typeList:{type:String,default:"course_list"},duration:{type:[Number,String],default:0}},data:function(){return{pathName:this.$route.name}},computed:{imgSrc:function(){if("classroom_list"===this.typeList)return this.course.cover.middle;var t=this.course.courseSet;return(t?t.cover.middle:this.order.cover.middle)||""},title:function(){return"classroom_list"===this.typeList?this.course.title:this.course.courseSetTitle||(this.course.courseSet?this.course.courseSet.title:"")||this.order.title},teachPlan:function(){return!!this.course.title&&this.course.title},imgClass:function(){return"vip"===this.typeList?"e-vip__img":"e-course__img"}},watch:{course:{handler:function(t){var e=t.courseSet;if("miniprogramSetting"===this.pathName&&e)for(var s=Object.keys(e.cover),i=0;i<s.length;i++)e.cover[s[i]]=e.cover[s[i]].replace(/^(\/\/)|(http:\/\/)/,"https://")},immediate:!0}},methods:{onClick:function(t){if(this.feedback&&"vip"!==this.typeList){var e="order"===this.type,s=this.course.id||this.order.targetId;"SPAN"!==t.target.tagName&&(e?"course"===this.typeList||"classroom"===this.typeList?this.$router.push({path:"/goods/".concat(this.order.goodsId,"/show"),query:{targetId:this.order.targetId,type:this.typeList+"_list"}}):location.href=this.order.targetUrl:"course"!==this.typeList&&("classroom_list"===this.typeList&&this.$router.push({path:"/classroom/".concat(s)}),"course_list"===this.typeList&&this.$router.push({path:"/course/".concat(s)})))}}}},u=Object(o.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"e-course"},[s("div",{staticClass:"clearfix",on:{click:t.onClick}},[s("div",{staticClass:"e-course__left pull-left"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgSrc,expression:"imgSrc"}],class:t.imgClass})]),s("div",{staticClass:"e-course__right pull-left"},["confirmOrder"===t.type?s("div",{staticClass:"e-course__title course-confirm-title"},[t._v("\n        "+t._s(t.title)+"\n      ")]):s("div",[s("div",{staticClass:"e-course__title text-overflow"},[t._v(t._s(t.title))]),"classroom_list"===t.typeList?s("div",{staticClass:"e-course__count"},[t._v("\n          共 "+t._s(t.course.courseNum)+" 门课程\n        ")]):t._e(),"course_list"===t.typeList?s("div",{staticClass:"e-course__project text-overflow"},[t.teachPlan?s("span",[t._v(t._s(t.teachPlan))]):t._e()]):t._e()]),s("switchBox",{attrs:{type:t.type,course:t.course,order:t.order,"student-num":t.course.studentNum,"published-task-num":t.course.publishedTaskNum}})],1)])])}),[],!1,null,null,null);e.a=u.exports},a262:function(t,e,s){"use strict";var i=s("7067");e.a={methods:{activityHandle:function(t,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(i.a)(t,e,s)}}}},b864:function(t,e,s){"use strict";s.r(e),s("8e6e"),s("ac6a"),s("456d");var i=s("bd86"),r=(s("e7e5"),s("d399")),a=s("75fc"),n=s("8807"),c=s("3ce7"),o={components:{eCourse:n.a},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},created:function(){},methods:{onLoad:function(){var t=this,e={offset:this.offset};c.a.getMyOrder({params:e}).then((function(e){var s=e.data,i=e.paging;t.isFirstRequestCompile=!0,t.list=[].concat(Object(a.a)(t.list),Object(a.a)(s)),t.offset=t.list.length,t.list.length==i.total&&(t.finished=!0),t.loading=!1})).catch((function(e){r.a.fail(e.message),t.isFirstRequestCompile=!0,t.loading=!1}))}}},l=s("a6c2"),u=Object(l.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orders"},[0===t.list.length&&t.isFirstRequestCompile?s("div",{staticClass:"orders-container__empty"},[s("img",{attrs:{src:"static/images/orderEmpty.png"}}),s("span",[t._v("暂无订单记录")])]):s("div",{staticClass:"order"},[s("van-list",{staticClass:"tab-list",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t){return s("e-course",{key:t.id,attrs:{order:t,"type-list":t.targetType,type:"order"}})})),1)],1)])}),[],!1,null,null,null).exports,p=(s("c5f6"),{cut:"砍价",groupon:"拼团",seckill:"秒杀"}),d={cut:"砍",groupon:"团",seckill:"秒"},v={successed:"成功",ongoing:"中",failed:"失败"},f={name:"ActivityItem",mixins:[s("a262").a],props:{activity:{type:Object,default:function(){return{}}}},data:function(){return{type2symbol:d,type2label:p,status2label:v,activityId:Number(this.activity.activityId)}},methods:{viewDetail:function(t){}}},h={components:{activityItem:Object(l.a)(f,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"marketing-groupon activity-cell",on:{click:t.viewDetail}},[s("div",{staticClass:"activity-cell__head"},[s("span",{staticClass:"head-left",class:t.activity.type},[t._v(t._s(t.type2symbol[t.activity.type]))]),s("span",{staticClass:"head-right",class:t.activity.status},[t._v(t._s(t.type2label[t.activity.type]+t.status2label[t.activity.status]))])]),s("div",{staticClass:"activity-cell__body",on:{click:function(e){return t.activityHandle(t.activityId)}}},[s("div",{staticClass:"marketing-groupon__image-container",class:{"marketing-groupon__image-empty":!t.activity.cover}},[t.activity.cover?s("img",{staticClass:"marketing-groupon__image",attrs:{src:t.activity.cover}}):t._e()]),s("div",{staticClass:"marketing-groupon__context e-groupon__context"},[s("div",{staticClass:"context-title text-overflow"},[t._v(t._s(t.activity.name))]),s("div",{staticClass:"context-sale"},[t.activity.price?s("span",{staticClass:"context-sale__sale-price"},[t._v(t._s(t.activity.price)+"元")]):t._e(),t.activity.originPrice?s("span",{staticClass:"context-sale__origin-price"},[t._v(t._s(t.activity.originPrice)+"元")]):t._e(),s("span",{staticClass:"context-sale__shopping"},[t._v(t._s(t.type2label[t.activity.type])+"详情")])])])])])}),[],!1,null,"057b9336",null).exports},data:function(){return{list:[],isFirstRequestCompile:!1,loading:!1,finished:!1,offset:0}},mounted:function(){this.onLoad()},methods:{onLoad:function(){var t=this,e={offset:this.offset};c.a.myActivities({params:e}).then((function(e){var s=e.data,i=e.paging;t.isFirstRequestCompile=!0,t.list=[].concat(Object(a.a)(t.list),Object(a.a)(s)),t.offset=t.list.length,t.list.length==i.total&&(t.finished=!0),t.loading=!1})).catch((function(e){r.a.fail(e.message),t.isFirstRequestCompile=!0,t.loading=!1}))}}},g=Object(l.a)(h,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orders"},[0===t.list.length&&t.isFirstRequestCompile?s("div",{staticClass:"orders-container__empty"},[s("img",{attrs:{src:"static/images/orderEmpty.png"}}),s("span",[t._v("暂无活动记录")])]):s("div",{staticClass:"activity"},[s("van-list",{staticClass:"tab-list",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(t,e){return s("activity-item",{key:e,attrs:{activity:t}})})),1)],1)])}),[],!1,null,null,null).exports,m=s("2f62");function _(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function y(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?_(Object(s),!0).forEach((function(e){Object(i.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var b={computed:y(y({},Object(m.e)(["user","vipSwitch"])),{},{vipDated:function(){var t=new Date(this.user.vip.deadline).getTime();return(new Date).getTime()>t}}),created:function(){this.getUserInfo()},methods:y({},Object(m.c)(["getUserInfo"]))};function C(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function O(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?C(Object(s),!0).forEach((function(e){Object(i.a)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var w=[{name:"我的错题本",link:"myWrongQuestionBook"}],j={components:{Orders:u,activity:g,User:Object(l.a)(b,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user"},[s("div",{staticClass:"user-section clearfix"},[s("router-link",{attrs:{to:"/settings"}},[s("div",{staticClass:"user-img"},[t.user.avatar?s("img",{attrs:{src:t.user.avatar.large}}):t._e(),t.user.vip&&!t.vipDated&&t.vipSwitch?s("img",{staticClass:"user-vip-icon",attrs:{src:t.user.vip.icon,alt:""}}):t._e()])]),s("div",{staticClass:"user-middle"},[s("div",{staticClass:"user-name"},[t._v(t._s(t.user.nickname))])]),s("router-link",{staticClass:"user-setting",attrs:{to:"/settings"}},[s("img",{attrs:{src:"static/images/setting.png"}})])],1),t.vipSwitch?s("div",{staticClass:"user-member"},[s("div",{staticClass:"user-member-style"},[s("div",{staticClass:"user-member-text"},[s("img",{attrs:{src:"static/images/vip_enter.png"}}),t.user.vip?s("div",{staticClass:"user-vip",class:{"user-vip-open":t.vipDated}},[s("router-link",{staticClass:"clearfix",attrs:{to:{path:"/vip",query:{id:t.user.vip.levelId}}}},[t.vipDated?[s("span",[t._v("您的会员已过期")]),s("span",{staticClass:"pull-right"},[t._v("\n                立即续费\n                "),s("van-icon",{attrs:{name:"arrow"}})],1)]:[s("span",{staticClass:"pull-left"},[s("p",[t._v(t._s(t.user.vip.vipName))]),s("p",{staticStyle:{"font-size":"12px","margin-top":"2px"}},[t._v("\n                  会员到期时间：\n                  "+t._s(t.$moment(t.user.vip.deadline).format("YYYY-MM-DD"))+"\n                ")])]),s("span",{staticClass:"pull-right",staticStyle:{"margin-top":"10px"}},[t._v("\n                续费/升级\n                "),s("van-icon",{attrs:{name:"arrow"}})],1)]],2)],1):s("div",{staticClass:"user-vip user-vip-open"},[s("router-link",{staticClass:"clearfix",attrs:{to:"/vip"}},[s("span",[t._v("您还不是会员，开通会员享特权")]),s("span",{staticClass:"pull-right"},[t._v("\n              去开通\n              "),s("van-icon",{attrs:{name:"arrow"}})],1)])],1)])])]):t._e()])}),[],!1,null,null,null).exports},mixins:[s("5ede").a],data:function(){return{activeIndex:0,tabs:["我的订单","我的活动"],hasBusinessDrainage:!1,isShowDistributorEntrance:!1,drpSetting:{},entryData:w}},computed:O(O({},Object(m.e)(["DrpSwitch"])),Object(m.e)({isLoading:function(t){return t.isLoading}})),created:function(){var t=this;setTimeout((function(){window.scrollTo(0,0)}),100),c.a.hasPluginInstalled().then((function(e){t.hasBusinessDrainage=e.BusinessDrainage})),this.showDistributorEntrance()},methods:{showDistributorEntrance:function(){this.DrpSwitch?(this.getDrpSetting(),this.getAgencyBindRelation()):this.isShowDistributorEntrance=!1},getAgencyBindRelation:function(){var t=this;c.a.getAgencyBindRelation().then((function(e){e.agencyId?t.isShowDistributorEntrance=!0:t.isShowDistributorEntrance=!1}))},getDrpSetting:function(){var t=this;c.a.getDrpSetting().then((function(e){t.drpSetting=e}))}}},x=Object(l.a)(j,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("e-loading"):t._e(),s("user"),s("router-link",{attrs:{to:{name:"couponCovert"}}},[t.hasBusinessDrainage?s("div",{staticClass:"coupon-code-entrance"},[t._v("\n      兑换卡券\n      "),s("i",{staticClass:"van-icon van-icon-arrow pull-right"})]):t._e()]),t.isShowDistributorEntrance?s("a",{attrs:{href:t.drpSetting.distributor_login_url}},[t._m(0)]):t._e(),s("router-link",{attrs:{to:{name:"my_certificate"}}},[s("div",{staticClass:"coupon-code-entrance"},[t._v("\n      我的证书\n      "),s("i",{staticClass:"van-icon van-icon-arrow pull-right"})])]),t._l(t.entryData,(function(e,i){return[s("router-link",{key:i,attrs:{to:{name:e.link}}},[s("div",{staticClass:"coupon-code-entrance"},[t._v("\n        "+t._s(e.name)+"\n        "),s("i",{staticClass:"van-icon van-icon-arrow pull-right"})])])]})),s("van-tabs",{staticClass:"after-tabs e-learn",model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},t._l(t.tabs,(function(t,e){return s("van-tab",{key:e,attrs:{title:t}})})),1),s("orders",{directives:[{name:"show",rawName:"v-show",value:0===t.activeIndex,expression:"activeIndex === 0"}]}),s("activity",{directives:[{name:"show",rawName:"v-show",value:1===t.activeIndex,expression:"activeIndex === 1"}]})],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"coupon-code-entrance"},[this._v("\n      分销中心\n      "),e("i",{staticClass:"van-icon van-icon-arrow pull-right"})])}],!1,null,null,null);e.default=x.exports}}]);