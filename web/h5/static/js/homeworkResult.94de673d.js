(window.webpackJsonp=window.webpackJsonp||[]).push([["homeworkResult"],{cae6:function(t,e,s){"use strict";s.r(e),s("a481"),s("ac6a");var r=s("db72"),a=s("3ce7"),i=s("2f62"),o=s("faa5"),n={name:"HomeworkResult",mixins:[s("ea9a").a],data:function(){return{result:null,calHeight:null,items:null,title:null,color:{right:"green",none:"brown",wrong:"orange",partRight:"orange",noAnswer:"gray"}}},computed:Object(r.a)({},Object(i.d)({isLoading:function(t){return t.isLoading},user:function(t){return t.user}}),{usedTime:function(){var t=parseInt(this.result.usedTime)||0;return t<60?1:Math.round(t/60)},isReadOver:function(){return!(!this.result||"finished"!==this.result.status)}}),created:function(){this.gethomeworkResult()},beforeRouteEnter:function(t,e,s){document.getElementById("app").style.background="#f6f6f6",s()},beforeRouteLeave:function(t,e,s){document.getElementById("app").style.background="",s()},methods:Object(r.a)({},Object(i.c)({setNavbarTitle:o.k}),{gethomeworkResult:function(){var t=this;a.a.homeworkResult({query:{homeworkId:this.$route.query.homeworkId,homeworkResultId:this.$route.query.homeworkResultId}}).then((function(e){t.result=e,t.setNavbarTitle(e.paperName),t.title=e.paperName,t.interruption(),t.formatData(e),t.calSubjectHeight()}))},interruption:function(){var t=this;this.canDoing(this.result,this.user.id).then((function(){t.startHomework()})).catch((function(e){var s=e.answer;t.submitHomework(s)}))},formatData:function(t){var e=this,s=[];t.items.forEach((function(t){"material"!=t.type&&(t.status=e.getStatus(t),s.push(t)),"material"==t.type&&t.subs.forEach((function(t){t.status=e.getStatus(t),s.push(t)}))})),this.items=s},getStatus:function(t){return t.testResult&&t.testResult.status?t.testResult.status:"noAnswer"},startHomework:function(){this.$router.replace({name:"homeworkDo",query:{targetId:this.$route.query.taskId,homeworkId:this.$route.query.homeworkId,courseId:this.$route.query.courseId},params:{KeepDoing:!0}})},submitHomework:function(t){var e=this,s={answer:t,homeworkId:this.$route.query.homeworkId,userId:this.user.id,homeworkResultId:this.$route.query.homeworkResultId};this.handHomeworkdo(s).then((function(t){e.$router.replace({name:"homeworkResult",query:{homeworkId:e.$route.query.homeworkId,homeworkResultId:e.$route.query.homeworkResultId,courseId:e.$route.query.courseId,taskId:e.$route.query.taskId}})})).catch((function(t){Toast.fail(t.message)}))},calSubjectHeight:function(){var t=this;this.$nextTick((function(){var e=t.$refs.data.offsetHeight+t.$refs.tag.offsetHeight+46,s=document.documentElement.clientHeight-e-(t.$refs.footer.offsetHeight||0);t.calHeight="".concat(s,"px")}))},viewAnalysis:function(){this.$router.push({name:"homeworkAnalysis",query:{homeworkId:this.$route.query.homeworkId,homeworkResultId:this.$route.query.homeworkResultId,title:this.title}})}})},u=s("a6c2"),c=Object(u.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"testResults"},[t.isLoading?s("e-loading"):t._e(),t.result?s("div",{ref:"data",staticClass:"result-data"},[s("div",{staticClass:"result-data__item"},[t._v("\n      正确率\n      "),t.isReadOver?s("div",{staticClass:"result-data__bottom data-number-green data-medium"},[s("span",{staticClass:"data-number"},[t._v(t._s(t.result.rightRate))]),t._v("%\n      ")]):s("div",{staticClass:"result-data__bottom data-text-blue"},[t._v("待批阅")])]),s("div",{staticClass:"result-data__item"},[t._v("\n      做题用时\n      "),s("div",{staticClass:"result-data__bottom data-number-gray data-medium"},[s("span",{staticClass:" data-number"},[t._v(t._s(t.usedTime))]),t._v("分钟\n      ")])])]):t._e(),s("div",{ref:"tag",staticClass:"result-tag"},[t._m(0),t._m(1),t._m(2),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isReadOver,expression:"!isReadOver"}],staticClass:"result-tag-item clearfix"},[s("div",{staticClass:"result-tag-item__circle circle-brown"}),t._v("\n      待批阅\n    ")])]),s("div",{staticClass:"result-subject",style:{height:t.calHeight}},[s("div",{staticClass:"result-paner"},[s("ul",{staticClass:"result-list"},t._l(t.items,(function(e,r){return s("li",{key:r,class:["result-list__item homework-number","circle-"+t.color[e.status]]},[t._v(t._s(e.seq)+"\n        ")])})),0)]),s("div",{ref:"footer",staticClass:"result-footer"},[s("van-button",{staticClass:"result-footer__btn",style:{marginRight:t.isReadOver?"2vw":0},attrs:{type:"primary"},on:{click:t.viewAnalysis}},[t._v("查看解析\n      ")]),t.isReadOver?s("van-button",{staticClass:"result-footer__btn",attrs:{type:"primary"},on:{click:function(e){return t.startHomework()}}},[t._v("再做一次\n      ")]):t._e()],1)])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"result-tag-item clearfix"},[e("div",{staticClass:"result-tag-item__circle circle-green"}),this._v("\n      正确\n    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"result-tag-item clearfix"},[e("div",{staticClass:"result-tag-item__circle circle-orange"}),this._v("\n      错误\n    ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"result-tag-item clearfix"},[e("div",{staticClass:"result-tag-item__circle circle-gray"}),this._v("\n      未作答\n    ")])}],!1,null,null,null);e.default=c.exports},ea9a:function(t,e,s){"use strict";s("e17f");var r=s("2241");s("456d"),s("ac6a"),e.a={methods:{canDoing:function(t,e){return new Promise((function(s,a){if(t&&"doing"===t.status){var i="homework-".concat(e,"-").concat(t.id),o=JSON.parse(localStorage.getItem(i));o=o?Object.keys(o).forEach((function(t){o[t]=o[t].filter((function(t){return""!==t}))})):{},r.a.confirm({title:"提示",cancelButtonText:"放弃做题",confirmButtonText:"继续做题",message:"您有未完成的作业，是否继续？"}).then((function(){s()})).catch((function(){a({answer:o})}))}}))}}}}}]);