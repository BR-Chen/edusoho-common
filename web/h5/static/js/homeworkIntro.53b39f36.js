(window.webpackJsonp=window.webpackJsonp||[]).push([["homeworkIntro"],{a23b:function(t,e,o){"use strict";o.r(e),o("8e6e"),o("ac6a"),o("456d"),o("e7e5");var r=o("d399"),n=o("bd86"),s=o("3ce7"),i=o("2f62");function a(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?a(o,!0).forEach((function(e){Object(n.a)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):a(o).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var c={name:"HomeworkIntro",mixins:[o("ea9a").a],data:function(){return{courseId:null,taskId:null,homework:null}},computed:u({hasResult:function(){return!!this.homework.latestHomeworkResult}},Object(i.d)({isLoading:function(t){return t.isLoading},user:function(t){return t.user}})),created:function(){this.getInfo()},beforeRouteEnter:function(t,e,o){document.getElementById("app").style.background="#f6f6f6",o()},beforeRouteLeave:function(t,e,o){document.getElementById("app").style.background="",o()},methods:u({},Object(i.b)("course",["handHomeworkdo"]),{getInfo:function(){var t=this;this.courseId=this.$route.query.courseId,this.taskId=this.$route.query.taskId,s.a.getHomeworkIntro({query:{courseId:this.courseId,taskId:this.taskId}}).then((function(e){t.homework=e.homework,t.interruption()}))},interruption:function(){var t=this;this.canDoing(this.homework.latestHomeworkResult,this.user.id).then((function(){t.startHomework()})).catch((function(e){var o=e.answer;t.submitHomework(o)}))},showResult:function(){this.$router.push({name:"homeworkResult",query:{homeworkId:this.homework.id,homeworkResultId:this.homework.latestHomeworkResult.id,courseId:this.$route.query.courseId,taskId:this.taskId}})},startHomework:function(){this.$router.push({name:"homeworkDo",query:{targetId:this.taskId,homeworkId:this.homework.id,courseId:this.$route.query.courseId},params:{KeepDoing:!0}})},submitHomework:function(t){var e=this,o={answer:t,homeworkId:this.homework.id,userId:this.user.id,homeworkResultId:this.homework.latestHomeworkResult.id};this.handHomeworkdo(o).then((function(t){e.showResult()})).catch((function(t){r.a.fail(t.message)}))}})},h=o("a6c2"),l=Object(h.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t.isLoading?o("e-loading"):t._e(),t.homework?o("div",{staticClass:"intro-body"},[o("van-panel",{staticClass:"panel intro-panel",attrs:{title:"作业名称"}},[o("div",{staticClass:"intro-panel__content intro-panel__content--title"},[t._v(t._s(t.homework.name))])]),o("van-panel",{staticClass:"panel intro-panel",attrs:{title:"作业说明"}},[o("div",{staticClass:"intro-panel__content",domProps:{innerHTML:t._s(t.homework.description)}})])],1):t._e(),t.homework?o("div",{staticClass:"intro-footer"},[t.hasResult?o("van-button",{staticClass:"intro-footer__btn",attrs:{type:"primary"},on:{click:t.showResult}},[t._v("查看结果")]):o("van-button",{staticClass:"intro-footer__btn",attrs:{type:"primary"},on:{click:function(e){return t.startHomework()}}},[t._v("开始答题")])],1):t._e()],1)}),[],!1,null,null,null);e.default=l.exports},ea9a:function(t,e,o){"use strict";o("e17f");var r=o("2241");o("456d"),o("ac6a"),e.a={methods:{canDoing:function(t,e){return new Promise((function(o,n){if(t&&"doing"===t.status){var s="homework-".concat(e,"-").concat(t.id),i=JSON.parse(localStorage.getItem(s));i=i?Object.keys(i).forEach((function(t){i[t]=i[t].filter((function(t){return""!==t}))})):{},r.a.confirm({title:"提示",cancelButtonText:"放弃做题",confirmButtonText:"继续做题",message:"您有未完成的作业，是否继续？"}).then((function(){o()})).catch((function(){n({answer:i})}))}}))}}}}}]);