{% extends 'layout.html.twig' %}

{% do script(['libs/vue.js','libs/item-bank-test/lib/itemBank.umd.min.js', 'app/js/re-edit/index.js']) %}

{% block title %}{{ 'course.testpaper_manage.import.re_edit.title'|trans }} - {{ parent() }}{% endblock %}

{% block stylesheets %}
  {{ parent() }}
  {% if maincolor != 'default' and setting('theme.code', 'jianmo') == 'jianmo' %}
    <link href="{{ asset('static-dist/libs/item-bank-test/styles/item-bank-' ~ maincolor ~ '.css') }}" rel="stylesheet" />
  {% else %}
    <link href="{{ asset('static-dist/libs/item-bank-test/styles/item-bank.css') }}" rel="stylesheet" />
  {% endif %}
{% endblock %}

{% block body %}
  <div id="app"></div>
  <input type="hidden" name="filename" value='{{ filename }}'>
  <input type="hidden" name="items" value='{{ items|json_encode }}'>
  <input type="hidden" name="bankId" value='{{ questionBankId }}'>
  <input type="hidden" name="categoryTree" value='{{ categoryTree|json_encode }}'>
  <input type="hidden" name="type" value="{{ type }}">
  <input type="hidden" name="ckeditor_image_upload_url" value="{{ path('editor_upload', {token:upload_token('course')}) }}">
  <input type="hidden" name="ckeditor_image_download_url" value="{{ path('editor_download', {token:upload_token('course')}) }}">
  <input type="hidden" name="saveUrl" value="
    {% if type == 'item' %}
      {{ path('questions_import_save', {token: app.request.get('token')}) }}
    {% else %}
      {{ path('testpaper_import_save', {token: app.request.get('token')}) }}
    {% endif %}
  ">
  {% include 'attachment-upload/upload-data.html.twig' %}
{% endblock %}