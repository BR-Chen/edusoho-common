{% extends 'layout.html.twig' %}

{% block title %}{{ assessment.name }} - {{ parent() }}{% endblock %}

{% if app.request.query.get('action') is not empty %}
  {% set showHeader = 1 %}
{% else %}
  {% set showHeader = 0 %}
{% endif %}

{% block body %}
  {% block header %}
    {% if showHeader %}{{ parent() }}{% endif %}
  {% endblock %}

  {% if answerRecord.status == 'finished' %}
  <div class="item-bank-result">
    <div class="clearfix item-bank-result-content">
      {# <img class="pull-left" src="http://es-dev.com/files/course/2020/01-08/152609175feb848803.png"> #}
      <div class="item-bank-result-info text-left">
        {% if passedStatus == true %}
        <div class="color-success item-bank-result-info__text">恭喜您已通过本次考试!</div>
        {% else %}
        <div class="color-warning item-bank-result-info__text">很遗憾，您未通过本次考试</div>
        {% endif %}
        <div class="color-gray cd-text-sm">教师评语：{{ answerReport.comment|default('-') }}</div>
      </div>
    </div>
  </div>
  {% endif %}

  {% if app.request.query.get('action', '') == 'check' %}
    {{ render(controller('AppBundle:AnswerEngine/AnswerEngine:assessmentResult', {answerRecordId: answerRecord.id})) }}
  {% else %}
    {{ render(controller('AppBundle:AnswerEngine/AnswerEngine:report', {answerRecordId: answerRecord.id, restartUrl:restartUrl, answerShow:answerShow})) }}
  {% endif %}

  {% block footer %}
    {% if showHeader|default(1) %}{{ parent() }}{% endif %}
  {% endblock %}
{% endblock %}